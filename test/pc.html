<?
if(!$symbol)$symbol="000660";
?>
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
	<link rel="stylesheet" href="/css/kfits.css?ver=201807030900">
	<script src="http://www.stockgo.co.kr/js/jquery-1.9.1.min.js"></script> 
	<script src="/js/widget.js?ver=201712051400"></script>
    <!--<script src="/js/kfitsChart.js?ver=201810088"></script>-->
    <script type="text/javascript" src="Html5Chart.js"></script>
    <script src="/js/RealDate.js?ver=20180703002"></script>
</head>

<body onload="Load('Full','ChartDIV','kfits');">


    <div id="indAddDiv" class="indAddDiv" style="overflow: scroll">
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind1" value="_MA_" onclick="indChick('ind1')" style="vertical-align:middle;cursor:pointer;"> 가격 이동평균
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind5" value="_VMA_" onclick="indChick('ind5')" style="vertical-align:middle;cursor:pointer;"> 거래량 이동평균
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind2" value="_Env_" onclick="indChick('ind2')" style="vertical-align:middle;cursor:pointer;"> Envelope
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind3" value="_BB_" onclick="indChick('ind3')" style="vertical-align:middle;cursor:pointer;"> Bollinger Bands
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind20"  value="_PIVOT_" onclick="indChick('ind20')" style="vertical-align:middle;cursor:pointer;"> PIVOT
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind35" value="_MAC_" onclick="indChick('ind35')" style="vertical-align:middle;cursor:pointer;"> MAC
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind36" value="_RAINBOW_" onclick="indChick('ind36')" style="vertical-align:middle;cursor:pointer;"> 그물차트
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind6" value="_MACD_" onclick="indChick('ind6')" style="vertical-align:middle;cursor:pointer;"> MACD
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind7" value="_MACDOS_" onclick="indChick('ind7')" style="vertical-align:middle;cursor:pointer;"> MACD Oscillator
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind8" value="_ADX_" onclick="indChick('ind8')" style="vertical-align:middle;cursor:pointer;"> ADX
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind24"  value="_PSYCO_" onclick="indChick('ind24')" style="vertical-align:middle;cursor:pointer;"> 심리도(Psyco)
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind10" value="_CCI_" onclick="indChick('ind10')" style="vertical-align:middle;cursor:pointer;"> CCI
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind17" value="_Disparity_" onclick="indChick('ind17')" style="vertical-align:middle;cursor:pointer;"> 이격도
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind12" value="_MOM_" onclick="indChick('ind12')" style="vertical-align:middle;cursor:pointer;"> Monentum
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind18" value="_OBV_" onclick="indChick('ind18')" style="vertical-align:middle;cursor:pointer;"> OBV
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind22" value="_ROC_" onclick="indChick('ind22')" style="vertical-align:middle;cursor:pointer;"> ROC
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind13" value="_RSI_" onclick="indChick('ind13')" style="vertical-align:middle;cursor:pointer;"> RSI
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind14" value="_StoF_" onclick="indChick('ind14')" style="vertical-align:middle;cursor:pointer;"> Stochastics Fast
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind15" value="_StoS_" onclick="indChick('ind15')" style="vertical-align:middle;cursor:pointer;"> Stochastics Slow
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind16" value="_WILL_" onclick="indChick('ind16')" style="vertical-align:middle;cursor:pointer;"> William R
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind25" value="_AB_" onclick="indChick('ind25')" style="vertical-align:middle;cursor:pointer;"> AB Ratio
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind26" value="_AD_" onclick="indChick('ind26')" style="vertical-align:middle;cursor:pointer;"> AD Line
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind27" value="_ATR_" onclick="indChick('ind27')" style="vertical-align:middle;cursor:pointer;"> ATR
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind28" value="_CO_" onclick="indChick('ind28')" style="vertical-align:middle;cursor:pointer;"> Chaikins OSC
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind29" value="_CV_" onclick="indChick('ind29')" style="vertical-align:middle;cursor:pointer;"> Chaikins Volatility
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind30" value="_DMI_" onclick="indChick('ind30')" style="vertical-align:middle;cursor:pointer;"> DMI
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind31" value="_EOM_" onclick="indChick('ind31')" style="vertical-align:middle;cursor:pointer;"> EOM
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind32" value="_LRL_" onclick="indChick('ind32')" style="vertical-align:middle;cursor:pointer;"> LRL
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind33" value="_RCI_" onclick="indChick('ind33')" style="vertical-align:middle;cursor:pointer;"> RCI
        </div>
        <div class="indAddList">
            <input type="checkbox" name="chkIndi" id="ind34" value="_OSCV_" onclick="indChick('ind34')" style="vertical-align:middle;cursor:pointer;"> Volume Oscillator
        </div>

        <!-- LJH 2018.12.7 닫기버튼 대체 -->
        <!-- <div class="indAddBtn" onclick="IndicatorAdd('C');"><img src="/images/chart/bt_close_s_over.png"></div> -->
    </div>
	<div style="width:100%;height:1000px;margin:auto;background:#FFFFFF;" id="ChartDIV">
		<div style="padding:20px;background:#FFFFFF;">
			<div style="float:left;width:100%;height:30px;padding-bottom:10px;border-bottom:1px solid #B7B7B7;background:#FFFFFF;">
				<div style="position:relative;float:left;left:370px;line-height:30px;font-size:16px;z-index:999" id="sList">
					<span style="margin-left:20px;border-bottom:1px solid #4e5768;cursor:pointer;" onclick="TopSymbol_bit('KR001BTC__KRW__')">비트코인 BTC/KRW</span>
					<span style="margin-left:20px;border-bottom:1px solid #4e5768;cursor:pointer;" onclick="TopSymbol_bit('KR001ETH__KRW__')">이더리움 ETH/KRW</span>
					<span style="margin-left:20px;border-bottom:1px solid #4e5768;cursor:pointer;" onclick="TopSymbol_bit('KR001QTUM_KRW__')">퀀텀 QTUM/KRW</span>
				</div>
			</div>
			<div style="float:left;width:100%;min-width:1060px;height:80px;padding-top:10px;padding-bottom:10px;border-bottom:1px solid #B7B7B7;background:#FFFFFF;">
				<div style="float:left;width:417px;height:36px;padding:14px 0 10px 10px;">
					<div style="float:left;width:260px;height:42px;line-height:42px;font-size:34px;">
						<span style="font-weight:bold;color:#FF0000" id="TopPrc"> </span>
						<span style="font-size:20px;font-weight:bold;color:#8D8D8D" id="FX"> KRW</span>
					</div>
					<div style="float:left;width:157px;height:38px;line-height:38px;font-size:18px;" >
						<div style="float:left;width:100%;color:#F52D49;text-align:right;" id="TopCh"> </div>
						<div style="float:left;width:100%;color:#F52D49;text-align:right;" id="TopCg"> </div>
					</div>
				</div>
				<div style="float:right;height:36px;padding:14px 0 10px 10px;" id="HLVV">
					<div style="float:left;width:100%;">
						<div style="float:left;width:160px;height:36px;">
							<div style="float:left;width:100%;height:10px;line-height:10px;text-align:center;color:#000;font-size:12px;">고가</div>
							<div style="float:left;width:100%;height:26px;line-height:26px;font-size:20px;font-weight:bold;text-align:right;padding-top:11px">
								<span style="color:#FF0000;text-align:center;"  id="TopH"> </span>
							</div>
						</div>
						<div style="float:left;width:160px;height:36px;">
							<div style="float:left;width:100%;height:10px;line-height:10px;text-align:center;color:#000;font-size:12px;">저가</div>
							<div style="float:left;width:100%;height:38px;line-height:38px;font-size:20px;font-weight:bold;text-align:right;padding-top:11px">
								<span style="color:#0070FF;text-align:center;"  id="TopL"> </span>
							</div>
						</div>
						<div style="float:left;width:200px;height:36px;">
							<div style="float:left;width:100%;height:10px;line-height:10px;text-align:center;color:#000;font-size:12px;">거래수량</div>
							<div style="float:left;width:100%;height:38px;line-height:38px;font-size:20px;text-align:right;padding-top:11px">
									<span style="color:#000000;font-weight:bold;" id="TopVo"> </span>
									<span style="font-size:14px;color:#8D8D8D" id="voTopUnit"> BTC</span>
							</div>
						</div>
						<div style="float:left;width:200px;height:36px;margin-right:10px;">
							<div style="float:left;width:100%;height:10px;line-height:10px;text-align:center;color:#000;font-size:12px;">거래금액</div>
							<div style="float:left;width:100%;height:38px;line-height:38px;font-size:20px;text-align:right;padding-top:11px">
								<span style="color:#000000;font-weight:bold;" id="TopVa"> </span>
								<span style="font-size:14px;color:#8D8D8D" id="vaTopUnit">KRW</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div style="float:left;width:100%;height:28px;padding-top:10px;background:#FFFFFF;z-index:33">
				<div style="float:left;width:150;background:#FFFFFF;" id="IndiArr">
					<div style="float:right;width: 150px;height:28px;line-height:30px;background:#0C5196;border:1px solid #0C5196;text-align:center;color:#fff;cursor:pointer;font-family:'Dotum';font-size:14px;font-weight:bold;" onclick="IndicatorAdd('O');" >지표 설정&nbsp;&nbsp;<img src="/images/chart/arr_dn.png" style="vertical-align:middle;height:6px" ></div>
				</div>
				<!-- div style="float:left;padding-left:10px;height:28px;padding-bottom:10px;border-bottom:0px solid #B7B7B7;background:#FFFFFF;">
					<div style="float:left;line-height:28px;padding-right:10px;">
					<input type="text" id="symbol" name="symbol" value="KR001BTC__KRW__" style="width:300px;height:24px;font-size:18px;padding-left:5px;font-weight:bold"></div>
					<div style="float:left;line-height:24px;" onclick="SymbolChange();">
					 <img src="/images/chart/bt_search.png" style=";width:30px;height:30px;">
					</div>
				</div -->
				<input type="hidden" id="symbol" name="symbol" value="KR001BTC__KRW__">
				<div style="float:left;padding-left:30px;background:#FFFFFF;">
					<!--div style="float:left;line-height:30px;">
						조회 <input type="text"  id="icnt"   name="icnt" value="700" style="width:30px;height:28px;">건\
					</div-->
					<input type="hidden"  id="icnt"   name="icnt" value="3000" style="width:30px;height:28px;">
					<div style="float:left;line-height:30px;padding-left:10px;">
						<img src="/images/chart/bt_01_over.png" id="day"  onmouseout="highlight('ijwb','day','out')"  onmouseover="highlight('ijwb','day','over')"  onclick="IJWBChang('1')" style="cursor:pointer;">
						<img src="/images/chart/bt_02.png"     id="week" onmouseout="highlight('ijwb','week','out')" onmouseover="highlight('ijwb','week','over')" onclick="IJWBChang('2')" style="cursor:pointer;">
						<img src="/images/chart/bt_03.png"      id="mon"  onmouseout="highlight('ijwb','mon','out')"  onmouseover="highlight('ijwb','mon','over')"  onclick="IJWBChang('3')" style="cursor:pointer;">
						<img src="/images/chart/bt_05.png"      id="min"  onmouseout="highlight('ijwb','min','out')"  onmouseover="highlight('ijwb','min','over')"  onclick="IJWBChang('5')" style="cursor:pointer;">
						<!-- img src="/images/chart/bt_05.png"      id="sec"  onmouseout="highlight('ijwb','sec','out')"  onmouseover="highlight('ijwb','sec','over')"  onclick="IJWBChang('6')" -->
					</div>
					<div style="float:left;line-height:30px;display:none;" id="dataGroupDiv">
						<input type="hidden" id="ijwb"    name="ijwb"   value="1">
						<input type="hidden" id="ijwbG"   name="ijwbG"  value="1"> 
						<input type="radio"  id="ijwbGr1" name="ijwbGr" value="1"  onclick="IJWBGroupChang('1')" checked> 1
						<input type="radio"  id="ijwbGr2" name="ijwbGr" value="5"  onclick="IJWBGroupChang('5')"> 7
						<input type="radio"  id="ijwbGr3" name="ijwbGr" value="10" onclick="IJWBGroupChang('15')"> 14
						<input type="radio"  id="ijwbGr4" name="ijwbGr" value="30" onclick="IJWBGroupChang('30')"> 30
						<input type="radio"  id="ijwbGr5" name="ijwbGr" value="60" onclick="IJWBGroupChang('60')"> 60
						<input type="radio"  id="ijwbGr5" name="ijwbGr" value="60" onclick="IJWBGroupChang('120')"> 120
						<input type="radio"  id="ijwbGr5" name="ijwbGr" value="60" onclick="IJWBGroupChang('240')"> 240
					</div>
				</div>
				<div style="float:right;padding-right:10px;background:#FFFFFF;">
					<img src="/images/chart/btc_01.png" id="Tool01" onclick="AddLineTool('LINE_TOOL');" onmouseout="highlight('Tool','01','out')" onmouseover="highlight('Tool','01','over')" style="cursor:pointer;">
					<img src="/images/chart/btc_02.png" id="Tool02" onclick="AddLineTool('WLINE_TOOL');" onmouseout="highlight('Tool','02','out')" onmouseover="highlight('Tool','02','over')" style="cursor:pointer;">
					<img src="/images/chart/btc_03.png" id="Tool03" onclick="AddLineTool('HLINE_TOOL');" onmouseout="highlight('Tool','03','out')" onmouseover="highlight('Tool','03','over')" style="cursor:pointer;">
					<!--\
					<img src="/images/chart/c01.png" id="Tool01" onclick="AddLineTool();" onmouseout="highlight('Tool','01','out')" onmouseover="highlight('Tool','01','over')">
					<img src="/images/chart/c02.png" id="Tool02" onclick="AddLineTool();" onmouseout="highlight('Tool','02','out')" onmouseover="highlight('Tool','02','over')">
					<img src="/images/chart/c03.png" id="Tool03" onclick="AddLineTool();" onmouseout="highlight('Tool','03','out')" onmouseover="highlight('Tool','03','over')">
					<img src="/images/chart/c04.png" id="Tool04" onclick="AddLineTool();" onmouseout="highlight('Tool','04','out')" onmouseover="highlight('Tool','04','over')">
					<img src="/images/chart/c05.png" id="Tool05" onclick="AddLineTool();" onmouseout="highlight('Tool','05','out')" onmouseover="highlight('Tool','05','over')">
					<img src="/images/chart/c06.png" id="Tool06" onclick="AddLineTool();" onmouseout="highlight('Tool','06','out')" onmouseover="highlight('Tool','06','over')">
					<img src="/images/chart/c07.png" id="Tool07" onclick="AddLineTool();" onmouseout="highlight('Tool','07','out')" onmouseover="highlight('Tool','07','over')">
					<img src="/images/chart/c08.png" id="Tool08" onclick="AddLineTool();" onmouseout="highlight('Tool','08','out')" onmouseover="highlight('Tool','08','over')">
					<img src="/images/chart/c09.png" id="Tool09" onclick="AddLineTool();" onmouseout="highlight('Tool','09','out')" onmouseover="highlight('Tool','09','over')">
					<img src="/images/chart/c10.png" id="Tool10" onclick="AddLineTool();" onmouseout="highlight('Tool','10','out')" onmouseover="highlight('Tool','10','over')">
					<img src="/images/chart/c11.png" id="Tool11" onclick="AddLineTool();" onmouseout="highlight('Tool','11','out')" onmouseover="highlight('Tool','11','over')">
					<img src="/images/chart/c12.png" id="Tool12" onclick="AddLineTool();" onmouseout="highlight('Tool','12','out')" onmouseover="highlight('Tool','12','over')">
					<img src="/images/chart/c13.png" id="Tool13" onclick="AddLineTool();" onmouseout="highlight('Tool','13','out')" onmouseover="highlight('Tool','13','over')">
					<img src="/images/chart/c14.png" id="Tool14" onclick="AddLineTool();" onmouseout="highlight('Tool','14','out')" onmouseover="highlight('Tool','14','over')">
					<img src="/images/chart/c15.png" id="Tool15" onclick="AddLineTool();" onmouseout="highlight('Tool','15','out')" onmouseover="highlight('Tool','15','over')">
					-->
					<img src="/images/chart/bt_reset.png" id="reset" onclick="ResetChart();" onmouseout="highlight('Reset','reset','out')" onmouseover="highlight('Reset','reset','over')" style="cursor:pointer;">
				</div>
                <button onclick="ShowCrossLine();">십</button>
                <button onclick="Request();">재조회</button>
                <button onclick="SetCandleChart();">캔들차트</button>
                <button onclick="SetBarChart();">바차트</button>
                <button onclick="SetPAndFChart();">P&F차트</button>
				<!-- \
				<button onclick="Request();">재조회</button>
				<button onclick="AppendRequest();">추가조회</button>
				<button onclick="IndicatorAdd(\'O\');">지표추가</button>
				<button onclick="IndicatorSetup();">지표설정</button>
				<button onclick="AddLineTool();">추세선</button>
				<input type="text" id="RealData" name="RealData" value=""><button onclick="SetRealData();">실시간1건추가</button>
				<button onclick="StartReal();">실시간시작</button>
				<button onclick="StopReal();">실시간중지</button>
				-->
			</div>			
			<div class="canvas_container">
			<div id="canvasDP2" style="float:left;border-left:0px solid #B2B2B2;border-right:0px solid #B2B2B2;padding-left:0px;padding-right:0px">
					<div id="ChartDIV_canvasDiv" class="canvasDiv" ></div>
					<div id="canvasDiv2" class="canvasDiv" ></div>
					<!--<div style="float:right;">
						<img src="/images/chart/img_scl.png" class="logo" onmouseout="highlight('Logo','logDiv','out')" onmouseover="highlight('Logo','logDiv','over')" id="logoDiv"></div>-->
			</div>
			<div id="IndicatorSetupDiv" class="IndicatorSetupDiv"></div>
		</div>
	</div>
			<input type="hidden" id="indId">
			<input type="hidden" id="indKey">
</body>

<script>

    function ShowCrossLine() {

        var bShowCrossLine = Chart.IsVisibleCrossLine();
        if (bShowCrossLine === true)
            Chart.ShowCrossLine(false);
        else
            Chart.ShowCrossLine(true);

    }

function ResetChart(){

    //console.log("fMultiply(500000000000000, 0.87)" + fMultiply(500000000000000, 0.87));

    //var nViewCnt = Chart.GetViewCnt("_DATETIME_");
    //alert("뷰카운트:" + nViewCnt);

    var GlobalProperty = Chart.GetGlobalProperty();
    var nType = GlobalProperty.GetShowLatestPriceType();
    GlobalProperty.SetShowLatestPriceType(1);//보이는 영역에서 최근데이터
    GlobalProperty.SetPriceChangeRatioType(1);//이전봉 대비 등락률
    Chart.SetGlobalProperty(GlobalProperty);
    Chart.Draw(DRAW_CASE_SET_GLOBAL_PROPERTY);

    //alert("nType:" + nType);

   /*
   localStorage.removeItem('_MA_'); 
   console.log("local Reset:"+localStorage.getItem('_MA_'))
   //for(var r=2; r<=24; r++){
   for(var r=2; r<=11; r++){

		if(r!=4){
			if(document.getElementById('ind'+r).checked == true){
				Chart.DeleteIndicator(gGraphKeyObj['ind'+r]);
				Chart.Draw(DRAW_CASE_DEL_CHARTBLOCK);
				document.getElementById('ind'+r).checked=false;
			}
		}
	}
	TopPreData=null;	
	SymbolChange();
    */
}

function SetCandleChart() {

    var Graph = Chart.SetSpecialChartByRQ( "100", 0 );

}

function SetBarChart() {

var bShowCrossLine = Chart.IsVisibleCrossLine();
if (bShowCrossLine === true)
    Chart.ShowCrossLine(false);
else
    Chart.ShowCrossLine(true);

}

function SetPAndFChart() {

   var Graph = Chart.SetSpecialChartByRQ( "100", 1 );

}

function LStorage(){
//	console.log("DB start");
//	localStorage.setItem('one', 'jang');
//	localStorage.setItem('two', 'dong');
//	console.log("DB :"+dmf .getItem('one'));
//	console.log("DB :"+localStorage.getItem('two'));
	
	//localStorage.removeItem('test'); // localStorage 객체에서 원하는 값을 지우는 방법
    //localStorage.clear();            // 한번에 저장된 모든 값을 삭제하는 방법

}


var Chart = null;
var gSelectRQ = "";
var gChartEventScrollFunction = null;
var gbRequest = false;
var gChartSizeMode = "";
var gMarginX = 0;
var gMarginY = 0;
var Real_ID = null;

function RQInfos() {
    this.Info = new RQInfo();
    this.m_strContents = "";
};

var m_strPriceGraphKey;
function KfitsChart(symbol, ijwbID, ijwb, icnt, ijwbGroup) {

    //console.log("Multiply(0.0001234, 0.0002345)" + Multiply(0.0001234, 0.0002345));

    var Tsymbol = [],
        Tdiff = [],
        Tcurprc = [],
        Tupdnrate = [],
        Thighprc = [],
        Tlowprc = [],
        Tcumdealqty = [],
        Tcumdealcost = [];

    console.log("MM:" + vUnit + ":" + vUnit);

    var chartData = "";
    var dataArr,
        kovex_ijwb = 0;

    switch (ijwb) {
        case '1':
            kovex_ijwb = 2;
            ijwbGroup = 1;
            break;
        case '2':
            kovex_ijwb = 3;
            ijwbGroup = 1;
            break;
        case '3':
            kovex_ijwb = 4;
            ijwbGroup = 1;
            break;
        case '4':
            kovex_ijwb = 5;
            ijwbGroup = 1;
            break;
        case '5':
            kovex_ijwb = 1;
            break;
        case '6':
            kovex_ijwb = 6;
            break;
    }

    var Cdate = [],
        Ctime = [],
        Copenprc = [],
        Chighprc = [],
        Clowprc = [],
        Ccloseprc = [],
        Cealqty = [],
        Ccumdealqty = [];
    var B1symbol = [],
        B1diff = [],
        B1yesterdayprice = [],
        B1updnrate = [],
        B1precumdealqty = [],
        B1out_cnt = [];
    

    symbol = "000660";

    if (symbol.length == 3)
        var korvexSymbol = "KR001" + symbol + "_KRW__";
    else
        var korvexSymbol = "KR001" + symbol + "__KRW__";

    $.getJSON("http://211.240.103.90/kovex/chartdata.inc?symbol=" + symbol + "&num=300&ijwb=" + ijwb + "&ijwbGroup=" + ijwbGroup, function (dataArr) {

        //$.getJSON("http://211.240.103.90/kovex/chartdata.inc?symbol="+symbol+"&num=1000&ijwb="+ijwb, function (dataArr) {  /**** 메모리조회 (최대 2800개) */
        //$.getJSON("http://211.240.103.90/kovex/chartdata_db.inc?symbol=000660&num=4000", function (dataArr) { /**** DB 조회 (5000 개이상) */
        //$.getJSON("http://211.240.103.90/kovex/data.inc", '', function (dataArr) { /**** 만들어진 파일 데이터 조회 (5000개 조회 - 추가 조회시 다시 파일 갱신요청) */
       

        //////////////////////////////////////////////////////////////////
        var dataLength = dataArr.data.length;
        var dOpenprc,
            dHighprc,
            dLowprc,
            dCloseprc,
            dCumdealqty,
            dDate;
        var sData;
        var miniOrder;

        for (var i = 0; i < dataLength; i++) {

            if (ijwb != 5 && ijwb != 6)
                dDate = dataArr.data[i].date;
            else
                dDate = dataArr.data[i].date + dataArr.data[i].time;

            dOpenprc = sprintf(10, dataArr.data[i].openprc);
            dHighprc = sprintf(10, dataArr.data[i].highprc);
            dLowprc = sprintf(10, dataArr.data[i].lowprc);
            dCloseprc = sprintf(10, dataArr.data[i].closeprc);
            dCumdealqty = sprintf(19, dataArr.data[i].cumdealqty);

            sData = (dDate + "" + dOpenprc + "" + dHighprc + "" + dLowprc + "" + dCloseprc + "" + dCumdealqty);
            chartData += sData;
        }
        chartData = dataLength + "!" + chartData;
        ///////////////////////

        var RQInfoArray = [];

        //////////////////////////////////////////////////////////////////
        //20180115 이문수 test 주석처리 >>

        var RQInfos4 = new RQInfos();

        RQInfos4.Info.m_strContents = chartData;
        RQInfos4.Info.m_strItemCode = (symbol.substring(5, 13)).replace("__", "/");
        RQInfos4.Info.m_strItemName = (symbol.substring(5, 8)).replace("_", "");
        RQInfos4.Info.m_nCycle = eval(ijwb);

        RQInfos4.Info.m_nInterval = 1;
        RQInfos4.Info.m_strMarketStartTime = "090000";
        RQInfos4.Info.m_strMarketEndTime = "230000";

        ///////////////////////////////////////////////////		
        //if (FXc == "KRW")
        //    miniOrder = "0";
        //else
        //    miniOrder = "0.00000001";
        miniOrder = "1";

        //가격 표현 단위("0", "0.01", "0.00000001" 등 셋팅)
        RQInfos4.Info.m_strPriceDigit = miniOrder;

        //최소주문수량단위( ex: "0.0001" 입력 ) => 거래량 자리수 표현에 사용
        RQInfos4.Info.m_strOrderUnitQty = "\"" + vUnit + "\"";

        ///////////////////////////////////////////////////////
        //현재가, 전일종가, 대비, 등락율, 누적등락율 셋팅 예제

        //현재가
        RQInfos4.Info.m_CurPrice = parseFloat(Ccloseprc[0]);

        //전일종가
        RQInfos4.Info.m_PrevPrice = parseFloat(B1yesterdayprice[0]);

        //대비
        RQInfos4.Info.m_PriceChange = parseFloat(B1diff[0]);

        //등락율
        RQInfos4.Info.m_ChangeRatio = parseFloat(B1updnrate[0]);

        //누적등락율
        RQInfos4.Info.m_CumulativeVolume = parseFloat(B1precumdealqty[0]);
        ///////////////////////////////////////////////////////

        RQInfoArray.push(RQInfos4);

        var i;
        var nRQ = 100;
        var strSelectRQ = null;
        var strSelectGraphKey = null;
        console.log("ChartDIV:" + ChartDIV);

        if (Chart == null) {

            //1번 매개변수:canvas 부모 div id, 2번 매개변수:canvas id
            Chart = new CWebChart(ChartDIV, ChartDIV + "_Canvas");

            Chart.InitCtrl();

            Chart.SetBlockType(0);
        }

        for (i = 0; i < RQInfoArray.length; i++) {

            var sRQ = "" + nRQ;
            var rRQInfos = RQInfoArray[i];

            //차트컨트롤에 rq등록
            Chart.AddRQ(sRQ);
            Chart.SetRQInfo(sRQ, rRQInfos.Info);

            //차트컨트롤에 데이터 패킷정보 셋팅
            if (ijwb == 5 || ijwb == 6) {
                Chart.AddDateTimePacketInfo(sRQ, "_DATETIME_", "YYYYMMDDHHMMSS", 14);
            } else {
                Chart.AddDateTimePacketInfo(sRQ, "_DATETIME_", "YYYYMMDD", 8);
            }

            console.log("MM:" + FXc + ":" + vUnit);

            //if (FXc == "KRW")
            //    miniOrder = "0";
            //else
            //    miniOrder = "0.00000001";            

            Chart.AddInputNumPacketInfo(sRQ, "_OPEN_", 10, 10, 100, miniOrder);
            Chart.AddInputNumPacketInfo(sRQ, "_HIGH_", 10, 10, 100, miniOrder);
            Chart.AddInputNumPacketInfo(sRQ, "_LOW_", 10,  10, 100, miniOrder);
            Chart.AddInputNumPacketInfo(sRQ, "_CLOSE_", 10, 10, 100, miniOrder);
            Chart.AddInputNumPacketInfo(sRQ, "_VOLUME_", 19, 10, null, "1");

            ///////////////////////////////////////////////////////////////////////
            //계산용 패킷을 추가
            var strInputPacketNameArray = ["_HIGH_", "_LOW_"];
            Chart.AddPacketCalculator(sRQ, "_HL2_", strInputPacketNameArray, 10, 100, miniOrder);

            strInputPacketNameArray[2] = "_CLOSE_";
            Chart.AddPacketCalculator(sRQ, "_HLC3_", strInputPacketNameArray, 10, 100, miniOrder);

            //////////////////////////////////////////////////////////////////////////////////////////////////////
            //지표등록
            if (!Chart.IsExistGraphNameInRQ(sRQ, "_PRICE_")) {
                var strKey = Chart.AddIndicator(sRQ, "_PRICE_", -1, -1, -1, 2);
                m_strPriceGraphKey = strKey;

                //가격 이동평균 (0번 컬럼, 0번 로우 블록안에 0번째 Y축에 그래프 추가의미)
                strKey_MA = gGraphKeyObj['ind1'] = Chart.AddIndicator(sRQ, "_MA_", 0, 0, 0, 2);
                chkIndi = document.getElementsByName('chkIndi');
                chkIndi[0].checked = true;

                //거래량
                strKey_VOLUME = gGraphKeyObj['ind4'] = Chart.AddIndicator(sRQ, "_VOLUME_", -1, -1, -1, 1);

                //거래량 이평
                strKey_VMA = gGraphKeyObj['ind5'] = Chart.AddIndicator(sRQ, "_VMA_", 0, 1, 0, 1);
                chkIndi[1].checked = true;
            }

            //디폴트로 첫 rq와 가격차트를 선택된 것으로 할당
            if (i == 0) {
                strSelectRQ = sRQ;
                strSelectGraphKey = strKey;
            }

            //console.log("----AAAA:" + strKey_MA);
            //console.log("----AAAA:" + strKey_MACD);

            var bAppendRQ = (i > 0 ? true : false);
            Chart.RegXScaleMng(sRQ, bAppendRQ);

            Chart.SetPacketData(sRQ, rRQInfos.Info.m_strContents, rRQInfos.Info.m_strContents.length, false, false, true);

            nRQ++;
        }

        if (strSelectRQ && strSelectGraphKey)
            Chart.SelectGraphByKey(strSelectRQ, strSelectGraphKey);
        else {
            strSelectRQ = Chart.GetSelectedRQ();
            strSelectGraphKey = Chart.GetSelectedGraphKey();
        }
        Chart.ArrangeXScaleMng();

        //Chart.InitialViewInfo(300);
        Chart.InitialViewInfo(50);
        

        if (Chart.GetBlockType() == VERT_BLOCK_TYPE)
            Chart.ResetVBlockHeight();

        Chart.ExtractYScaleMinMax(true);

        Chart.Draw(DRAW_CASE_TR | DRAW_CASE_RESIZE | DRAW_CASE_ADD_CHARTBLOCK);

        Chart.LogXScaleMng();

        /********** 실시간 체결가 생성 -  장동천   ***************/
        //Real(symbol, getMainContainer);
        /********** 실시간 체결가 생성 -  장동천   ***************/

        /********** 실시간 체결가 생성 -  장동천   ***************/
        var ri = 0;
        fRealProcess = function RealTick() {

            return;

            var RDate = Real(ri);
            var RealDataArray = [];

            var t = new Date();
            var second = t.getSeconds();

            //RealDataArray[0] = "" + RDate.rd.exectime + (second < 10 ? ("0" + second) : second);
            RealDataArray[0] = RDate.rd.exectime;
            RealDataArray[1] = null;
            RealDataArray[2] = null;
            RealDataArray[3] = null;
            RealDataArray[4] = RDate.rd.execprice;
            RealDataArray[5] = RDate.rd.execvalue;

            //console.log("R__"+RealDataArray[0]+"_____________"+ RealDataArray[4]+"_____________"+RealDataArray[5]);


            Chart.SetRealData(strSelectRQ, PRICE_REAL_TYPE, 0, RealDataArray);
            if (TopViewType == "Y") {
                topPrc(RDate.rd.execprice, RDate.rd.highprc, RDate.rd.lowprc, RDate.rd.diff, RDate.rd.updnrate, RDate.rd.cumdealqty, RDate.rd.cumdealcost);
                TopPreData = true;
            }
            ri++;           
            //if (ri >= 10) {
            //    clearInterval(Real_ID);
            //}
        };

        if (Real_ID) {
            clearInterval(Real_ID);
            ri = 0;
        }
        Real_ID = setInterval(fRealProcess, 100);//20180116 이문수 test
        /********** 실시간 체결가 생성 -  장동천   ***************/
        //});//20180115 이문수 test >>
    });

    window.addEventListener('resize', function (e) {
        /**/         
        var nCanvasWidth = $(window).width() - gMarginX;
        var nCanvasHeight = $(window).height() - gMarginY;
        /**/
        /**** 빗썸 종합 고정 차트 ****/
        /*
            var FullWidth  = 1330;
            var FullHeight = 810;
        
            var nCanvasWidth  = FullWidth  - 12;
            var nCanvasHeight = FullHeight - 220;
            */
        if (nCanvasWidth < 1200) {
            document.getElementById('HLVV').style.display = 'none';
        } else {
            document.getElementById('HLVV').style.display = '';
        }
        var rTestCanvas = document.getElementById(ChartDIV + "_Canvas");
        rTestCanvas.width = nCanvasWidth;
        rTestCanvas.height = nCanvasHeight;

        Chart.Resize(nCanvasWidth, nCanvasHeight);
        // console.log("window resize : nCanvasWidth=" + nCanvasWidth + ", nCanvasHeight=" + nCanvasHeight+",ChartDIV:"+ChartDIV);
    });

    /***설정창 호출 *********/
    document.addEventListener('Event_SelectGraph', function (e) {

        console.log("CCC:" + ChartDIV);

        var rChart = e.m_rChart;
        var rSelectedIndicator = e.m_InfoData;

        var rRQSet = rChart.GetSelectedRQSet();
        var strRQ = rRQSet.GetRQ();
        var strGraphName = rSelectedIndicator.GetGraphName();
        var strGraphKey = rSelectedIndicator.GetGraphKey();
        console.log("Event_SelectGraph : [" + strRQ + "] " + strGraphName);
        var IndicatorPropertyInfo = rSelectedIndicator;
        //var IndicatorPropertyInfo = rSelectChart.GetPropertyInfo(strSelGraphKey);
        if (!IndicatorPropertyInfo)
            return;

        console.log(IndicatorPropertyInfo);

        if (1)
        {
            switch (strGraphName)
            {
                case "_MA_":
                    var IndKey = "ind1";
                    var indTab3 = "N";
                    break;
                case "_Env_":
                    var IndKey = "ind2";
                    var indTab3 = "N";
                    break;
                case "_BB_":
                    var IndKey = "ind3";
                    var indTab3 = "N";
                    break;
                case "_VOLUME_":
                    var IndKey = "ind4";
                    var indTab3 = "N";
                    break;
                case "_VMA_":
                    var IndKey = "ind5";
                    var indTab3 = "N";
                    break;
                case "_MACD_":
                    var IndKey = "ind6";
                    var indTab3 = "N";
                    break;
                case "_MACDOS_":
                    var IndKey = "ind7";
                    var indTab3 = "N";
                    break;
                case "_ADX_":
                    var IndKey = "ind8";
                    var indTab3 = "Y";
                    break;
                case "_ADXR_":
                    var IndKey = "ind9";
                    var indTab3 = "Y";
                    break;
                case "_CCI_":
                    var IndKey = "ind10";
                    var indTab3 = "N";
                    break;
                case "_TRIX_":
                    var IndKey = "ind11";
                    var indTab3 = "Y";
                    break;
                case "_MOM_":
                    var IndKey = "ind12";
                    var indTab3 = "Y";
                    break;
                case "_RSI_":
                    var IndKey = "ind13";
                    var indTab3 = "Y";
                    break;
                case "_StoF_":
                    var IndKey = "ind14";
                    var indTab3 = "Y";
                    break;
                case "_StoS_":
                    var IndKey = "ind15";
                    var indTab3 = "Y";
                    break;
                case "_WILL_":
                    var IndKey = "ind16";
                    var indTab3 = "Y";
                    break;
                case "_Disparity_":
                    var IndKey = "ind17";
                    var indTab3 = "Y";
                    break;
                case "_OBV_":
                    var IndKey = "ind18";
                    var indTab3 = "Y";
                    break;
                case "_VR_":
                    var IndKey = "ind19";
                    var indTab3 = "Y";
                    break;
                case "_PIVOT_":
                    var IndKey = "ind20";
                    var indTab3 = "Y";
                    break;
                case "_LRS_":
                    var IndKey = "ind21";
                    var indTab3 = "Y";
                    break;
                case "_ROC_":
                    var IndKey = "ind22";
                    var indTab3 = "Y";
                    break;
                case "_SONAR_":
                    var IndKey = "ind23";
                    var indTab3 = "Y";
                    break;
                case "_PSYCO_":
                    var IndKey = "ind24";
                    var indTab3 = "Y";
                    break;
				case "_AB_":
                    var IndKey = "ind25";
                    var indTab3 = "Y";
                    break;
                case "_AD_":
                    var IndKey = "ind26";
                    var indTab3 = "Y";
                    break;
                case "_ATR_":
                    var IndKey = "ind27";
                    var indTab3 = "Y";
                    break;
                case "_CO_":
                    var IndKey = "ind28";
                    var indTab3 = "Y";
                    break;
                case "_CV_":
                    var IndKey = "ind29";
                    var indTab3 = "Y";
                    break;
                case "_DMI_":
                    var IndKey = "ind30";
                    var indTab3 = "Y";
                    break;
                case "_EOM_":
                    var IndKey = "ind31";
                    var indTab3 = "Y";
                    break;
                case "_LRL_":
                    var IndKey = "ind32";
                    var indTab3 = "Y";
                    break;
                case "_RCI_":
                    var IndKey = "ind33";
                    var indTab3 = "Y";
                    break;
                case "_OSCV_":
                    var IndKey = "ind34";
                    var indTab3 = "Y";
                    break;
                case "_MAC_":
                    var IndKey = "ind35";
                    var indTab3 = "Y";
                    break;
                case "_RAINBOW_":
                    var IndKey = "ind36";
                    var indTab3 = "Y";
                    break;
            }

            if (strGraphName == "_PRICE_") {
                return;
                var msg = "" + "  <div class=\"pop_ind\">" + "  	<div class=\"pop_ind_div1\">" + "		<div class=\"pop_title\">가격차트</div>" + "		<div class=\"tabDiv\">" + "			<ul class=\"tab_type2\">" + "				<li class=\"on\" onclick=\"IndTabP('1')\" id=\"IndTab1\">스타일</li>" + "				<li onclick=\"IndTabP('2')\" id=\"IndTab2\">설명</li>" + "			</ul>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT1\" style=\"display:\">" + "        	<div class=\"main_list\">" + "				<div class=\"lTitle\">차트타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"DType\" class=\"selectBox\">" + "						<option value=\"0\">캔들차트</option>" + "						<option value=\"1\">선차트</option>" + "					</select>" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT2\" style=\"display:none\">" + "			<div class=\"textarea_div\">" + "				<iframe src=\"/images/chart/exp/" + strGraphName + ".html\" width=\"340\" height=\"360\" frameborder=0></iframe>" + "			</div>" + "		</div>" + "  </div>" + "	<div style=\"padding-top:20px;\">" + "		<div style=\"width:400px;height:50px;text-align:center;\">" + "			<img src=\"/images/chart/bt_ok.png\" onclick=\"indSetup('" + strGraphName + "','" + strGraphKey + "')\" style=\"cursor:pointer;\">&nbsp;&nbsp;&nbsp;" + "			<img src=\"/images/chart/bt_close.png\" onclick=\"IndicatorSetupClose('" + IndKey + "')\"  style=\"cursor:pointer;\">" + "		</div>" + "	</div>";

            }
            else if (strGraphName == "_VOLUME_")
            {
                return;
            }
            else
            {
                var msg = "" + "  <div class=\"pop_ind\">" + "  	<div class=\"pop_ind_div1\">" + "		<div class=\"pop_title\">" + IndicatorPropertyInfo.m_strTitle + "</div>" + "		<div class=\"tabDiv\">";

                if (indTab3 == "Y") {
                    msg += "" + "			<ul class=\"tab_type\">" + "				<li class=\"on\" onclick=\"IndTab('1')\" id=\"IndTab1\">변수</li>" + "				<li onclick=\"IndTab('2')\" id=\"IndTab2\">스타일</li>" + "				<li onclick=\"IndTab('3')\" id=\"IndTab3\">기준선</li>" + "				<li onclick=\"IndTab('4')\" id=\"IndTab4\">설명</li>";
                } else {
                    msg += "" + "			<ul class=\"tab_type3\">" + "				<li class=\"withTabV on\" onclick=\"IndTab('1')\" id=\"IndTab1\">변수</li>" + "				<li class=\"withTabV\" onclick=\"IndTab('2')\" id=\"IndTab2\">스타일</li>" + "				<li class=\"withTabH\" id=\"IndTab3\"></li>" + "				<li class=\"withTabV\" onclick=\"IndTab('4')\" id=\"IndTab4\">설명</li>";
                }

                msg += "" + "			</ul>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT1\">" + "			<div class=\"main_top\">" + "				<div class=\"tLTitle\">변수명</div>" + "				<div class=\"tRTitle\">변수값</div>" + "			</div>";

                var IndVariableStrNameH,
                    BaseNumData,
                    OverheatingData,
                    StagnancyData,
                    DTypeData,
                    MATypeData;

                for (var a = 0; a < IndicatorPropertyInfo.m_VariableArray.length; a++)
                {

                    if (ChartDIV == "mChartDIV")
                        continue;

                    var IndVariableStrName = IndicatorPropertyInfo.m_VariableArray[a].m_strName;

                    if (IndVariableStrName == "BaseNum") {
                        BaseNumData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;

                        //console.log("______"+BaseNumData+"___"+IndicatorPropertyInfo.m_VariableArray[a].m_strData);

                    } else if (IndVariableStrName == "Overheating") {
                        OverheatingData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "Stagnancy") {
                        StagnancyData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "DType") {
                        DTypeData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "MAType") {
                        MATypeData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName.substring(0, 4) == "View") {

                    } else {

                        console.log(IndVariableStrName);

                        switch (IndVariableStrName) {
                            case "Period":
                                IndVariableStrNameH = "기간";
                                break;
                            case "MAPeriod":
                                IndVariableStrNameH = "이평기간";
                                break;
                            case "ShortMAPeriod":
                                IndVariableStrNameH = "단기이평";
                                break;
                            case "LongMAPeriod":
                                IndVariableStrNameH = "장기이평";
                                break;
                            case "SignalPeriod":
                                IndVariableStrNameH = "Signal";
                                break;
                            case "UpLimitRate":
                                IndVariableStrNameH = "상한율";
                                break;
                            case "DownLimitRate":
                                IndVariableStrNameH = "하한율";
                                break;
                            case "SDMNum":
                                IndVariableStrNameH = "표준편차승수";
                                break;
                            case "FKPeriod":
                                IndVariableStrNameH = "Fase%K기간";
                                break;
                            case "FDPeriod":
                                IndVariableStrNameH = "Fase%D기간";
                                break;
                            case "SKPeriod":
                                IndVariableStrNameH = "Slow%K 기간";
                                break;
                            case "SDPeriod":
                                IndVariableStrNameH = "Slow%D 기간";
                                break;
                            case "WRPeriod":
                                IndVariableStrNameH = "William's %R";
                                break;
                            case "WDPeriod":
                                IndVariableStrNameH = "William's %D";
                                break;
                            case "Sec1period":
                                IndVariableStrNameH = "구간수1";
                                break;
                            case "Sec2period":
                                IndVariableStrNameH = "구간수2";
                                break;
                            case "Sec3period":
                                IndVariableStrNameH = "구간수3";
                                break;
                            case "Sec4period":
                                IndVariableStrNameH = "구간수4";
                                break; defaule:
                                IndVariableStrNameH = IndVariableStrName;
                                break;
                            // BaseNum   		기준선
                            // Overheating		과열
                            // Stagnancy		침체

                        }

                        msg += "" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">" + IndVariableStrNameH + "</div>" + "				<div class=\"lInp\"><input type=\"text\" id=\"" + IndVariableStrName + "\" class=\"textBox\" value=\"" + IndicatorPropertyInfo.m_VariableArray[a].m_strData + "\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "			</div>";
                    }
                }

                if (strGraphName == "_MA_" || strGraphName == "_VMA_")
                {
                    if (IndicatorPropertyInfo.m_MAPropertyInfoArray.length > 0)
                    {
                        msg += "		<div class=\"main_listMA\">";
                        for (var d = 0; d < IndicatorPropertyInfo.m_MAPropertyInfoArray.length; d++)
                        {

                            msg += "" + "				<div class=\"main_list\">"
                                // + "					<div class=\"lTitleScoll\">MA "+IndicatorPropertyInfo.m_nMAArray[d]+"</div>"
                                + "					<div class=\"lTitleScoll\">MA</div>" + "					<div class=\"lInpScoll\">" + "						<input type=\"text\" id=\"MA" + (d + 1) + "\" class=\"textBox\" value=\"" + IndicatorPropertyInfo.m_MAPropertyInfoArray[d].m_nMA + "\" onkeyup=\"OnyNumChar(event,'MA'," + (d + 1) + ")\" onkeydown=\"OnyNumChar(event,'MA'," + (d + 1) + ")\"></div>" + "				</div>";

                        }
                        msg += "		</div>";
                    }
                }

                msg += "" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">데이터타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"DType\" class=\"selectBox\">"
                    // + "						<option value=\"0\">시가</option>"
                    //+"						<option value=\"1\">고가</option>"
                    //+"						<option value=\"2\">저가</option>"
                    + "						<option value=\"3\"  selected>종가</option>"
                    // + "						<option value=\"4\">(고+저)/2</option>"
                    //+"						<option value=\"5\">(고+저+종)/3</option>"
                    + "					</select>" + "				</div>" + "			</div>" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">MA타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"MAType\"  class=\"selectBox\">" + "						<option value=\"0\" selected>단순</option>"
                    // + "						<option value=\"1\">지수</option>"
                    //+"						<option value=\"2\">가중</option>"
                    //+"						<option value=\"3\">기하</option>"
                    //+"						<option value=\"4\">조화</option>"
                    //+"						<option value=\"5\">심각</option>"
                    //+"						<option value=\"6\">적합</option>"
                    + "					</select>	" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT2\" style=\"display:none\">" + "			<div class=\"main_top\">" + "				<div class=\"TitleA\">선택</div>" + "				<div class=\"TitleL\">목록</div>" + "				<div class=\"TitleC\">색상</div>" + "				<div class=\"TitleT\">타입</div>" + "				<div class=\"TitleB\">두께</div>" + "				<div class=\"TitleS\">형태</div>" + "			</div>";

                for (var b = 0; b < IndicatorPropertyInfo.m_SubGraphArray.length; b++)
                {
                    var IndSubGraphInfo_bShow = IndicatorPropertyInfo.m_SubGraphArray[b].m_bShow;

                    if (IndSubGraphInfo_bShow == true)
                        var chBox = "checked";
                    else
                        var chBox = "";

                    var IndSubGraphInfo_clr = IndicatorPropertyInfo.m_SubGraphArray[b].m_clrSubGraph;

                    if (strGraphName == "_MA_" || strGraphName == "_VMA_") {
                        var IndSubGraphInfo_Title = IndicatorPropertyInfo.m_MAPropertyInfoArray[b].m_nMA;
                    } else {
                        var IndSubGraphInfo_Title = IndicatorPropertyInfo.m_SubGraphArray[b].m_strSubGraphTitle;
                    }

                    sLineType = "S";

                    if (IndicatorPropertyInfo.m_SubGraphArray[b].m_strSubGraphName == "BaseLine") {
                        var IndSubGraphInfo_clr_tab3 = IndSubGraphInfo_clr;
                        var IndSubGraphInfo_clr_num = b + 1;
                        //"clr"+(b+1);
                        sLineType = "B";
                        console.log("--->" + IndSubGraphInfo_clr_num);
                    }

                    //	if(IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_strSubGraphName=="BaseLine")continue;
                    //<div style=\"background:"+IndSubGraphInfo_clr+"\">&nbsp;</div>
                    //					<select type=\"text\" id=\"clr"+(b+1)+"\"  class=\"selectBoxT\" style=\"background:"+IndSubGraphInfo_clr+";\">"
                    //						<option value=\""+IndSubGraphInfo_clr+"\" style=\"background:"+IndSubGraphInfo_clr+";\" selected>"+IndSubGraphInfo_clr+"</option>"
                    //						<option value=\"#000000\" style=\"background:#000000;\">#000000</option>"
                    //					</select>"
                   
                    var COLOR_ARRAY = new Array("#FFC0CB", "#FF0000", "#FFA500", "#FFFF00", "#008000", "#0000FF", "#800080", "#000000");
                    colorHTML = "";
                    colorHTML += "<div style=\"float:left;border:1px;width:180px;\"><span style=\"float:left;width:20px;height:37px;background:" + IndSubGraphInfo_clr + "\" onclick=\"selectColor('" + (b + 1) + "','" + IndSubGraphInfo_clr + "','" + sLineType + "')\">&nbsp;</span>";

                    for (var c = 0; c < COLOR_ARRAY.length; c++) {
                        colorHTML += "<span style=\"float:left;width:20px;height:37px;background:" + COLOR_ARRAY[c] + "\" onclick=\"selectColor('" + (b + 1) + "','" + COLOR_ARRAY[c] + "\','" + sLineType + "')\">&nbsp;</span>";
                    }
                    colorHTML += "</div>";
                    msg += "" + "			<div id=\"colorDiv" + (b + 1) + "\" class=\"colorDiv\" style=\"display:none;position:absolute;left:202px;top:" + (142 + b * 37) + "px;z-index:99;\">" + colorHTML + "</div>" + "			<div class=\"main_list\">" + "				<div class=\"lInpA\"><input type=\"checkbox\" id=\"m_bShow" + (b + 1) + "\" value=\"y\" class=\"textBoxA\" " + chBox + "></div>" + "				<div class=\"lInpL\"><input type=\"text\" id=\"IndSubGraphInfo" + (b + 1) + "\" value=\"" + IndSubGraphInfo_Title + "\" class=\"textBoxL\" disabled></div>" + "				<div class=\"lInpC\" id=\"colorBox\" >" + "					<div id=\"clrBox" + (b + 1) + "\"style=\"border:1px;background:" + IndSubGraphInfo_clr + ";\" onclick=\"showColor(" + (b + 1) + ")\">&nbsp;</div>" + "						<input type=\"hidden\" id=\"clr" + (b + 1) + "\" value=\"" + IndSubGraphInfo_clr + "\" >" + "				</div>"
                        // + "				<div class=\"lInpC\" id=\"colorBox\" >"
                        //+"					<input type=\"color\" id=\"clr"+(b+1)+"\" value=\""+IndSubGraphInfo_clr+"\" class=\"inputBoxC\">"
                        //+"				</div>"
                        + "				<div class=\"lInpT\">" + "					<div class=\"selectBoxT\">선차트</div>" + "						<input type=\"hidden\" id=\"ChartType" + (b + 1) + "\">"
                        // + "					<select type=\"hidden\" id=\"ChartType"+(b+1)+"\"  class=\"selectBoxT\">"
                        //+"						<option value=\"0\">선</option>"
                        //+"						<option value=\"1\">막대</option>"
                        + "					</select>" + "				</div>" + "				<div class=\"lInpB\">" + "					<select type=\"text\" id=\"LinePt" + (b + 1) + "\"  class=\"selectBoxB\">" + "						<option value=\"1\">1pt</option>" + "						<option value=\"2\">2pt</option>" + "						<option value=\"3\">3pt</option>" + "						<option value=\"4\">4pt</option>" + "						<option value=\"5\">5pt</option>" + "					</select>" + "				</div>" + "				<div class=\"lInpS\">" + "					<select type=\"text\" id=\"lineType" + (b + 1) + "\"  class=\"selectBoxS\">" + "						<option value=\"0\">-</option>" + "						<option value=\"1\">---</option>" + "						<option value=\"2\">-&nbsp;-&nbsp;-</option>" + "						<option value=\"3\">-&nbsp;&nbsp;-&nbsp;&nbsp;-</option>" + "						<option value=\"4\">-&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;1-</option>" + "					</select>	" + "				</div>" + "			</div>";
                }

                if (OverheatingData != undefined)
                {
                    msg += "" + "			<div class=\"bojo\">" + "				<div class=\"bojoTitle\">부가기능 </div>" + "				<div class=\"bojoDiv\">" + "					<div class=\"bojoList\">" + "						<div class=\"bojoLV1\">과열</div>" + "						<div class=\"bojoLV2\"><!-- div style=\"background:#FF0000;width:70%;height:20px;margin-top:10px\">&nbsp;</div -->&nbsp;</div>" + "						<div class=\"bojoLV3\">기준값</div>" + "						<div class=\"bojoLV4\"><input type=\"text\" id=\"Overheating\" value=\"" + OverheatingData + "\" class=\"textBoxB\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "					</div>" + "					<div class=\"bojoList\">" + "						<div class=\"bojoLV1\">침체</div>" + "						<div class=\"bojoLV2\"><!-- div style=\"background:#0000FF;width:70%;height:20px;margin-top:10px;\">&nbsp;</div -->&nbsp;</div>" + "						<div class=\"bojoLV3\">기준값</div>" + "						<div class=\"bojoLV4\"><input type=\"text\" id=\"Stagnancy\" value=\"" + StagnancyData + "\" class=\"textBoxB\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "					</div>" + "				</div>" + "			</div>";
                }

                if (BaseNumData == undefined)
                    BaseNumData = "";

                console.log("______" + BaseNumData + "___");

                BcolorHTML = "";
                BcolorHTML += "<div style=\"float:left;border:1px;width:180px;\"><span style=\"float:left;width:20px;height:37px;background:" + IndSubGraphInfo_clr_tab3 + "\" onclick=\"selectColor('" + IndSubGraphInfo_clr_num + "','" + IndSubGraphInfo_clr_tab3 + "','B')\">&nbsp;</span>";
                for (var c = 0; c < COLOR_ARRAY.length; c++)
                {
                    BcolorHTML += "<span style=\"float:left;width:20px;height:37px;background:" + COLOR_ARRAY[c] + "\" onclick=\"selectColor('" + IndSubGraphInfo_clr_num + "','" + COLOR_ARRAY[c] + "\','B')\">&nbsp;</span>";
                }

                BcolorHTML += "</div>";
                msg += "" + "		</div>" + "		<div id=\"colorDivB\" class=\"colorDiv\" style=\"display:none;position:absolute;left:202px;top:" + 200 + "px;z-index:99;\">" + BcolorHTML + "</div>" + "		<div class=\"mainDiv\" id=\"mainT3\" style=\"display:none\">" + "			<div style=\"width:100%;padding-top:10px\">" + "				<div style=\"float:left;width:50%;border:0px solid #2B3D57;background:#fff;\">" + "					<div style=\"float:left;width:100%;height:340px;padding-top:10px;\">" + "						<div style=\"float:left;width:50%;\">" + "							<div style=\"float:left;width:100%;padding-bottom:10px;height:20px;\">" + "								<input type=\"text\" id=\"baselineKey\" value=\"\" class=\"textBox3\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\">" + "							</div>" + "							<div style=\"float:left;width:80%;padding-bottom:10px;height:250px;border:0px solid #2B3D57;\">" + "								<select name=\"BaseNum\" id=\"BaseNum\" style=\"width:100%;height:250px;background:#fff;border:1px solid #4e5768;color:#000;float:left;vertical-align:top;\" size=2>" + "										<option value=\"" + BaseNumData + "\" selected>" + BaseNumData + "</option>" + "								</select>" + "							</div>" + "						</div>" + "						<div style=\"float:left;width:45%;\">" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"baseAdd();\"><img src=\"/images/chart/bt_p.png\"></div>" + "							</div>" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"basedel('O');\"><img src=\"/images/chart/bt_del.png\"></div>" + "							</div>" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"basedel('A');\"><img src=\"/images/chart/bt_del_all.png\"></div>" + "							</div>" + "						</div>" + "					</div>" + "				</div>" + "				<div style=\"float:left;width:46%;border:2px solid #D0D6DE;background:#fff;margin-left:10px\">" + "					<div style=\"float:left;width:100%;\">" + "						<div style=\"float:left;width:100%;height:40px;line-height:40px;border-bottom:2px solid #D0D6DE;font-weight:bold;\">기준선 스타일</div>" + "						<div style=\"float:left;width:100%;height:50px;border-bottom:1px solid #D0D6DE;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">색상</div> " + "							<div id=\"colorBox\" style=\"float:left;width:68%;padding-right:2px;padding-top:10px;\">" + "								<div id=\"clrBoxB\"style=\"width:80%;height:30px;background:" + IndSubGraphInfo_clr_tab3 + ";\" onclick=\"showColor('B')\">&nbsp;</div>" + "								<input type=\"hidden\" id=\"clr_tab3\" value=\"" + IndSubGraphInfo_clr_tab3 + "\" >" + "							</div>"
                       + "						</div>" + "						<div style=\"float:left;width:100%;height:50px;border-bottom:1px solid #D0D6DE;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">두께</div>" + "							<div style=\"float:left;width:68%;line-height:50px;padding-right:2px;\">" + "								<select type=\"text\" id=\"BLinePt\"  class=\"selectBoxB3\">" + "									<option value=\"1\">1pt</option>" + "									<option value=\"2\">2pt</option>" + "									<option value=\"3\">3pt</option>" + "									<option value=\"4\">4pt</option>" + "									<option value=\"5\">5pt</option>" + "								</select>" + "							</div>" + "						</div>" + "						<div style=\"float:left;width:100%;height:50px;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">형태</div>" + "							<div style=\"float:left;width:68%;line-height:50px;padding-right:2px;\">" + "								<select type=\"text\" id=\"BlineType\"  class=\"selectBoxS3\">" + "									<option value=\"0\">-</option>" + "									<option value=\"1\">--</option>" + "								</select>" + "							</div>" + "						</div>" + "					</div>" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT4\" style=\"display:none\">" + "			<div class=\"textarea_div\">" + "				<iframe src=\"/images/chart/exp/" + strGraphName + ".html\" width=\"340\" height=\"360\" frameborder=0></iframe>" + "			</div>" + "		</div>" + "  </div>" + "	<div style=\"padding-top:20px;\">" + "		<div style=\"width:400px;height:50px;text-align:center;\">" + "			<img src=\"/images/chart/bt_ok.png\" onclick=\"indSetup('" + strGraphName + "','" + strGraphKey + "')\" style=\"cursor:pointer;\">&nbsp;&nbsp;&nbsp;" + "			<img src=\"/images/chart/bt_close.png\" onclick=\"IndicatorSetupClose('" + IndKey + "')\"  style=\"cursor:pointer;\">" + "		</div>" + "	</div>";                
            }

            if (ChartDIV != "mChartDIV") {

                $('#IndicatorSetupDiv').empty();
                $('#IndicatorSetupDiv').append(msg);
                document.getElementById('IndicatorSetupDiv').style.display = "inline-block";
            }
        }
    });

    //가로스크롤 위치가 좌측 끝 부분 위치한 상태에서 좌측 하단 스크롤 버튼을 클릭하면 발생하는 이벤트에 이벤트 함수 연결
    if (!gChartEventScrollFunction) {

        gChartEventScrollFunction = function (e) {

            var rqInfoForScroll = e.m_mapRqInfo;
            for (var strRq in rqInfoForScroll) {

                var rqInfo = rqInfoForScroll[strRq];

                addData(strRq, rqInfo.m_strItemCode, "" + rqInfo.m_nCycle, rqInfo.m_strNextKey);
            }
        };

        document.addEventListener('Event_Scroll', gChartEventScrollFunction);
    }
}

function RealPrice(RDate) {
    fRealProcess(RDate);
}

function Request() {

}

function AppendRequest() {

}

function AddLineTool(ToolType) {
    // var LINE_TOOL = 0, RECT_TOOL = 1, CIRCLE_TOOL = 2, VERT_LINE_TOOL = 3, HOZR_LINE_TOOL = 4, CROSS_LINE_TOOL = 5;
    console.log("Tool________________:" + ToolType);
    if (Chart) {
        if (ToolType == "LINE_TOOL")
            Chart.AddTool(LINE_TOOL);
        if (ToolType == "WLINE_TOOL")
            Chart.AddTool(HOZR_LINE_TOOL);
        if (ToolType == "HLINE_TOOL")
            Chart.AddTool(VERT_LINE_TOOL);
        if (ToolType == "RECT_TOOL")
            Chart.AddTool(RECT_TOOL);
        if (ToolType == "CIRCLE_TOOL")
            Chart.AddTool(CIRCLE_TOOL);
        if (ToolType == "CROSS_LINE_TOOL")
            Chart.AddTool(CROSS_LINE_TOOL);
    }
}

function ChartZoom(zoKey) {
    if (Chart) {
        if (zoKey == "Z")
            Chart.ZoomIn(10);
        else
            Chart.ZoomOut(10);
    }
}

/**************Jang 2017-12-04  start ***********************************************/

function sprintf(d, num) {// sprintf 함수
    var str = "";
    for (var i = 0; i < d; i++) {
        str += "0";
    }
    str += num;

    return str.slice("-" + d);
}

// 숫자 타입에서 쓸 수 있도록 format() 함수 추가
Number.prototype.format = function () {
    if (this == 0)
        return 0;

    var reg = /(^[+-]?\d+)(\d{3})/;
    var n = (this + '');

    while (reg.test(n))
        n = n.replace(reg, '$1' + ',' + '$2');

    return n;
};

function FRP(val, precision) {
    var p = Math.pow(10, precision);
    return Math.round(val * p) / p;

}

// 문자열 타입에서 쓸 수 있도록 format() 함수 추가
String.prototype.format = function () {
    var num = parseFloat(this);
    if (isNaN(num))
        return "0";

    return num.format();
};
/**************Jang 2017-12-04  End ***********************************************/

function SymbolChange() {
    //KfitsChart(document.getElementById("symbol").value);
    console.log("______________________________" + document.getElementById("symbol").value + "___________________________");
    if (preSymbol) {
        console.log(preSymbol);
        RealClose(preSymbol);
    }
    var id = null;
    /*
        for (var i = 0; i < document.getElementsByName("ijwb").length; i++) {
        id = 'ijwb' + (i + 1);
        if (document.getElementById(id).checked) {
        var ijwbType = document.getElementById(id).value;
        console.log(ijwbType);
        break;
        }
        }
        */
    var ijwbType = document.getElementById('ijwb').value;
    var ijwbGroup = document.getElementById('ijwbG').value;
    id = 'ijwb' + ijwbType;

    KfitsChart(document.getElementById("symbol").value, id, ijwbType, document.getElementById("icnt").value, ijwbGroup);
    preSymbol = document.getElementById("symbol").value;
}

function SetRealData() {
    var strRealData = document.getElementById("RealData").value;
    var strRealDataArray = strRealData.split(";");
    //strRQ;20180116201008;222;55

    var strRQ = strRealDataArray[0];
    var RealDataArray = [];
    RealDataArray[0] = strRealDataArray[1];
    RealDataArray[1] = null;
    RealDataArray[2] = null;
    RealDataArray[3] = null;
    RealDataArray[4] = parseFloat(strRealDataArray[2]);
    RealDataArray[5] = parseFloat(strRealDataArray[3]);

    Chart.SetRealData(strRQ, PRICE_REAL_TYPE, 0, RealDataArray);
}

function StartReal() {
    if (preSymbol) {
        RealClose(preSymbol, getMainContainer);
        Real(document.getElementById("symbol").value);
    } else {
        //Real_ID = setInterval(fRealProcess, 50);//20180116 이문수 test
        Real(document.getElementById("symbol").value, getMainContainer);
    }
}

function StopReal() {
    //clearInterval(Real_ID);
    RealClose(preSymbol, getMainContainer);
}

function Load(ChartLoad, ChartDivName, ContainerID) {

    ChartDIV = ChartDivName;
    getMainContainer = ContainerID;
    console.log("차트_____________________________________________________" + ChartLoad);
    
    gChartSizeMode = ChartLoad;

    if (ChartLoad == "Full" || ChartLoad == "wt1400") {
        /*****전체 사이즈 ***/
        var FullWidth = $(window).width();
        var FullHeight = $(window).height();
        gMarginX = 40;
        gMarginY = 220;
        TopViewType = "Y";
        document.getElementById(ChartDIV + "_canvasDiv").style.width = FullWidth - gMarginX;
        document.getElementById("canvasDP2").style.height = (FullHeight - gMarginY) + "px";
        this.canvasWidth = FullWidth - gMarginX;
        CC = "<canvas id='" + ChartDIV + "_Canvas' width=" + (FullWidth - gMarginX) + " height=" + (FullHeight - gMarginY) + "  class='canvasCss'></canvas>";
    } else if (ChartLoad == "__wt1400") {
        /******빗썸 종합차트 ******/
        var FullWidth = 1330;
        var FullHeight = 810;
        TopViewType = "Y";
        gMarginX = 12;
        gMarginY = 250;
        document.getElementById(ChartDIV + "_canvasDiv").style.width = FullWidth - gMarginX;
        document.getElementById("canvasDP2").style.height = (FullHeight - gMarginY) + "px";
        this.canvasWidth = FullWidth - gMarginX;
        CC = "<canvas id='" + ChartDIV + "_Canvas' width=" + (FullWidth - gMarginX) + " height=" + (FullHeight - gMarginY) + "  class='canvasCss'></canvas>";
    } else if (ChartLoad == "wt2500") {
        /******빗썸 종합주문 ******/
        var FullWidth = 450;
        var FullHeight = 310;
        TopViewType = "N";
        gMarginX = 10;
        gMarginY = 40;
        document.getElementById(ChartDIV + "_canvasDiv").style.width = FullWidth - gMarginX;
        document.getElementById("canvasDP2").style.height = (FullHeight - gMarginY) + "px";
        this.canvasWidth = FullWidth - gMarginX;
        CC = "<canvas id='" + ChartDIV + "_Canvas' width=" + (FullWidth - gMarginX) + " height=" + (FullHeight - gMarginY) + "  class='canvasCss'></canvas>";
    }
    console.log("차트_____________________________________________________" + CC);
    $('#' + ChartDIV + '_canvasDiv').empty();
    $('#' + ChartDIV + '_canvasDiv').append(CC);

    Chart = new CWebChart(ChartDIV, ChartDIV + "_Canvas");
    //1번 매개변수:canvas 부모 div id, 2번 매개변수:canvas id
    //Chart.SetBlockType(0);
    Chart.InitCtrl();
    Chart.SetBlockType(VERT_BLOCK_TYPE);

    SymbolChange();
}

function indChickDiv(key) {

    if (document.getElementById(key).checked == true) {
        document.getElementById(key).checked = false;
    } else {
        document.getElementById(key).checked = true;
    }
    indChick(key);

}

function indChick(key) {

    var SetIco = key + "SetIco";
    
    if (document.getElementById(key).checked == true) {

        //document.getElementById(SetIco).style.display = "";

        var indName = document.getElementById(key).value;
        var strIndicatorKey = null;

        if (indName == "_MA_" || indName == "_Env_" || indName == "_BB_" || indName == "_RAINBOW_" || indName == "_MAC_" || indName == "_PIVOT_") {
            strIndicatorKey = Chart.AddIndicator("100", indName, 0, 0, 0, 2);
        } else if (indName == "_VMA_") {
            strIndicatorKey = Chart.AddIndicator("100", indName, 0, 1, 0, 1);
        } else {
            strIndicatorKey = Chart.AddIndicator("100", indName, -1, -1, -1, 1);
        }

        Chart.IndicatorCalc("100", strIndicatorKey);
        Chart.Draw(DRAW_CASE_ADD_CHARTBLOCK);

        gGraphKeyObj[key] = strIndicatorKey;

    } else {
        
        var indName = document.getElementById(key).value;
        
        Chart.DeleteIndicator(gGraphKeyObj[key]);
        Chart.Draw(DRAW_CASE_DEL_CHARTBLOCK);
        gGraphKeyObj[key] = undefined;
    }
}

function indSetup(indName, key) {
    console.log("indSetup A[" + indName + "]__[" + key + "]");
    /*
        
    var rChart = e.m_rChart;
    var rSelectedIndicator = e.m_InfoData;
        
    var rRQSet = rChart.GetSelectedRQSet();
    var strRQ = rRQSet.GetRQ();
    var strGraphName = rSelectedIndicator.GetGraphName();
    console.log("Event_SelectGraph : [" + strRQ + "] " + strGraphName );
    console.log(rSelectedIndicator);
    */
    //var IndicatorPropertyInfo = Chart.m_InfoData(key);
    //	IndicatorSetup(strGraphName);
    //var IndicatorPropertyInfo = rSelectedIndicator;

    var IndicatorPropertyInfo = Chart.GetPropertyInfo(key);

    //console.log(IndicatorPropertyInfo);

    if (!IndicatorPropertyInfo)
        return;

    localStorage.setItem(indName, 'S');

    if (indName == "_MA_" || indName == "_VMA_") {
        //console.log("local:"+indName);
        for (var a = 0; a < IndicatorPropertyInfo.length; a++) {

            IndicatorPropertyInfo[a].m_nMA = document.getElementById('MA' + (a + 1)).value;
            localStorage.setItem(indName + 'm_nMA[' + a + ']', document.getElementById('MA' + (a + 1)).value);
            //console.log("indSetup MA:"+indName+"m_nMA["+a+"]:");

            IndicatorPropertyInfo[a].m_nMAType = document.getElementById('MAType').value;
            localStorage.setItem(indName + 'm_nMAType[' + a + ']', document.getElementById('MAType').value);

            if (document.getElementById("m_bShow" + (a + 1)).checked == true)
                var SubG_m_bShow = true;
            else
                var SubG_m_bShow = false;

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_bShow = SubG_m_bShow;
            localStorage.setItem(indName + 'm_bShow[' + a + ']', SubG_m_bShow);

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_clrSubGraph = document.getElementById("clr" + (a + 1)).value;
            localStorage.setItem(indName + 'm_clrSubGraph[' + a + ']', document.getElementById("clr" + (a + 1)).value);

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_nLineType = document.getElementById("lineType" + (a + 1)).value;
            localStorage.setItem(indName + 'm_nLineType[' + a + ']', document.getElementById("lineType" + (a + 1)).value);

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_nThickness = eval(document.getElementById("LinePt" + (a + 1)).value) / 0.9;
            localStorage.setItem(indName + 'm_nThickness[' + a + ']', eval(document.getElementById("LinePt" + (a + 1)).value));

            //console.log("local:"+a+":"+indName+":"+localStorage.getItem(indName+'_m_nMA['+a+']'))
            //console.log("local:"+a+":"+indName+":"+localStorage.getItem(indName+'m_nMAType['+a+']'))
            //console.log("local:"+a+":"+indName+":"+localStorage.getItem(indName+'m_bShow['+a+']'))
        }

    } else {

        for (var a = 0; a < IndicatorPropertyInfo.m_VariableArray.length; a++) {
            var IndVariableStrName = IndicatorPropertyInfo.m_VariableArray[a].m_strName;

            if (IndVariableStrName.substring(0, 4) == "View")
                break;

            IndicatorPropertyInfo.m_VariableArray[a].m_strData = eval(document.getElementById(IndVariableStrName).value);
            localStorage.setItem(indName + 'm_VariableArray_m_strData[' + a + ']', eval(document.getElementById(IndVariableStrName).value));

            //console.log("local:"+indName+'m_VariableArray_m_strData['+a+']'+"===="+document.getElementById(IndVariableStrName).value);
        }

        var keyNum = 0;

        for (var b = 0; b < IndicatorPropertyInfo.m_SubGraphPropertyInfoArray.length; b++) {
            keyNum = b + 1;
            //console.log(keyNum);

            if (document.getElementById("m_bShow" + keyNum).checked == true)
                var SubG_m_bShow = true;
            else
                var SubG_m_bShow = false;

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_bShow = SubG_m_bShow;
            localStorage.setItem(indName + 'm_SubGraphPropertyInfoArray_m_bShow[' + b + ']', SubG_m_bShow);
            //console.log("local:"+indName+'m_SubGraphPropertyInfoArray_m_bShow['+b+']'+"===="+IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_strSubGraphName+":"
            //	         +IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_bShow);

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_clrSubGraph = document.getElementById("clr" + keyNum).value;
            localStorage.setItem(indName + 'm_SubGraphPropertyInfoArray_m_clrSubGraph[' + b + ']', document.getElementById("clr" + keyNum).value);
            //console.log("local:"+indName+'m_SubGraphPropertyInfoArray_m_clrSubGraph['+b+']'+"===="+document.getElementById("clr"+keyNum).value);

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nLineType = document.getElementById("ChartType" + keyNum).value;
            localStorage.setItem(indName + 'm_SubGraphPropertyInfoArray_m_nLineType[' + b + ']', document.getElementById("ChartType" + keyNum).value);
            //console.log("local:"+indName+'m_SubGraphPropertyInfoArray_m_nLineType['+b+']'+"===="+document.getElementById("ChartType"+keyNum).value);

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nLineType = document.getElementById("lineType" + keyNum).value;
            localStorage.setItem(indName + 'm_SubGraphPropertyInfoArray_m_nLineType[' + b + ']', document.getElementById("lineType" + keyNum).value);
            //console.log("local:"+indName+'m_SubGraphPropertyInfoArray_m_nLineType['+b+']'+"===="+document.getElementById("lineType"+keyNum).value);

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nThickness = eval(document.getElementById("LinePt" + keyNum).value) / 0.9;
            localStorage.setItem(indName + 'm_SubGraphPropertyInfoArray_m_nThickness[' + b + ']', document.getElementById("LinePt" + keyNum).value);
            //console.log("local:"+indName+'m_SubGraphPropertyInfoArray_m_nThickness['+b+']'+"===="+document.getElementById("LinePt"+keyNum).value);
        }
    }

    Chart.SetPropertyInfo(key, IndicatorPropertyInfo);
    Chart.IndicatorCalc("100", key);
    Chart.Draw(DRAW_CASE_TR);

    document.getElementById('indId').value = indName;
    // 임시 테스트 용
    document.getElementById('indKey').value = key;

}

function IndSaveLoad(indNameSqn, indName) {
    console.log("IndSaveLoad:" + localStorage.getItem(indName));

    if (localStorage.getItem(indName) == null)
        return;

    var IndicatorPropertyInfo = Chart.GetPropertyInfo(indNameSqn);

    if (!IndicatorPropertyInfo)
        return;

    console.log(IndicatorPropertyInfo);

    if (indName == "_MA_" || indName == "_VMA_") {
        //return;

        for (var a = 0; a < IndicatorPropertyInfo.length; a++) {
            //console.log("IndSaveLoad:"+localStorage.getItem(indName+'m_nMA['+a+']'));
            //IndicatorPropertyInfo[a].m_nMA= document.getElementById('MA'+a).value =	localStorage.getItem(indName+'m_nMA['+a+']');
            //IndicatorPropertyInfo[a].m_nMAType= document.getElementById('MAType').value = localStorage.getItem(indName+'m_nMAType['+a+']');

            if (localStorage.getItem(indName + 'm_bShow[' + a + ']') == "true")
                var SubG_m_bShow = true;
            else
                var SubG_m_bShow = false;

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_bShow = SubG_m_bShow;

            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_clrSubGraph = localStorage.getItem(indName + 'm_clrSubGraph[' + a + ']');
            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_nLineType = localStorage.getItem(indName + 'm_nLineType[' + a + ']');
            IndicatorPropertyInfo[a].m_PriceChartLineInfo.m_nThickness = eval(localStorage.getItem(indName + 'm_nThickness[' + a + ']'));
        }

    } else {

        for (var a = 0; a < IndicatorPropertyInfo.m_VariableArray.length; a++) {
            var IndVariableStrName = IndicatorPropertyInfo.m_VariableArray[a].m_strName;

            //if(IndVariableStrName.substring(0,4)=="View")break;

            IndicatorPropertyInfo.m_VariableArray[a].m_strData = eval(localStorage.getItem(indName + 'm_VariableArray_m_strData[' + a + ']'));
        }

        var keyNum = 0;

        for (var b = 0; b < IndicatorPropertyInfo.m_SubGraphPropertyInfoArray.length; b++) {
            keyNum = b + 1;

            if (localStorage.getItem(indName + 'm_SubGraphPropertyInfoArray_m_bShow[' + b + ']') == "true")
                var SubG_m_bShow = true;
            else
                var SubG_m_bShow = false;

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_bShow = SubG_m_bShow;

            console.log("local main SL:m_bShow:" + IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_bShow);

            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_clrSubGraph = localStorage.getItem(indName + 'm_SubGraphPropertyInfoArray_m_clrSubGraph[' + b + ']');
            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nLineType = localStorage.getItem(indName + 'm_SubGraphPropertyInfoArray_m_nLineType[' + b + ']');
            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nLineType = localStorage.getItem(indName + 'm_SubGraphPropertyInfoArray_m_nLineType[' + b + ']');
            IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_nThickness = eval(localStorage.getItem(indName + 'm_SubGraphPropertyInfoArray_m_nThickness[' + b + ']')) / 0.9;
        }
    }

    Chart.SetPropertyInfo(indNameSqn, IndicatorPropertyInfo);
    Chart.IndicatorCalc("100", indNameSqn);
    Chart.Draw(DRAW_CASE_TR);
}

/*** 분석 도구 호출 ******/
function wDrawLine(tg) {
    console.log(tg);
}

function DoModalIndicatorSetup(rSelectChart, strRQ, strSelGraphKey, strGraphName) {
    /*
        설정창 이쪽으로 이동
        rSelectChart,  ==>Chart
        strRQ,  ===>100
        strSelGraphKey==> gGraphKeyObj[IndKey]
        
        strGraphName
        
        */
    /*
        var rChart = e.m_rChart;
        var rSelectedIndicator = chart;
        
        var rRQSet = rChart.GetSelectedRQSet();
        var strRQ = rRQSet.GetRQ();
        var strGraphName = rSelectedIndicator.GetGraphName();
        var strGraphKey = rSelectedIndicator.GetGraphKey();
        console.log("Event_SelectGraph : [" + strRQ + "] " + strGraphName );
        var IndicatorPropertyInfo = rSelectedIndicator;
        */
    var IndicatorPropertyInfo = rSelectChart.GetPropertyInfo(strSelGraphKey);

    //var IndicatorPropertyInfo = rSelectChart.GetPropertyInfo(strSelGraphKey);
    if (!IndicatorPropertyInfo)
        return;

    console.log(IndicatorPropertyInfo);
    if (0) {
        //console.log("______["+IndKey+"]____________"+IndicatorPropertyInfo.m_VariableArray.length);
        //	IndicatorPropertyInfo.m_

        switch (strGraphName) {
            case "_MA_":
                var IndKey = "ind1";
                break;
            case "_Env_":
                var IndKey = "ind2";
                break;
            case "_BB_":
                var IndKey = "ind3";
                break;
            case "_VOLUME_":
                var IndKey = "ind4";
                break;
            case "_VMA_":
                var IndKey = "ind5";
                break;
            case "_MACD_":
                var IndKey = "ind6";
                break;
            case "_MACDOS_":
                var IndKey = "ind7";
                break;
            case "_ADX_":
                var IndKey = "ind8";
                break;
            case "_ADXR_":
                var IndKey = "ind9";
                break;
            case "_CCI_":
                var IndKey = "ind10";
                break;
            case "_TRIX_":
                var IndKey = "ind11";
                break;
            case "_MOM_":
                var IndKey = "ind12";
                break;
            case "_RSI_":
                var IndKey = "ind13";
                break;
            case "_StoF_":
                var IndKey = "ind14";
                break;
            case "_StoS_":
                var IndKey = "ind15";
                break;
            case "_WILL_":
                var IndKey = "ind16";
                break;
            case "_Disparity_":
                var IndKey = "ind17";
                break;
            case "_OBV_":
                var IndKey = "ind18";
                break;
            case "_VR_":
                var IndKey = "ind19";
                break;
            case "_PIVOT_":
                var IndKey = "ind20";
                break;
            case "_LRS_":
                var IndKey = "ind21";
                break;
            case "_ROC_":
                var IndKey = "ind22";
                break;
            case "_SONAR_":
                var IndKey = "ind23";
                break;
            case "_PSYCO_":
                var IndKey = "ind24";
                break;
			case "_AB_":
                var IndKey = "ind25";
                break;
            case "_AD_":
                var IndKey = "ind26";
                break;
            case "_ATR_":
                var IndKey = "ind27";
                break;
            case "_CO_":
                var IndKey = "ind28";
                break;
            case "_CV_":
                var IndKey = "ind29";
                break;
            case "_DMI_":
                var IndKey = "ind30";
                break;
            case "_EOM_":
                var IndKey = "ind31";
                break;
            case "_LRL_":
                var IndKey = "ind32";
                break;
            case "_RCI_":
                var IndKey = "ind33";
                break;
            case "_OSCV_":
                var IndKey = "ind34";
                break;
            case "_MAC_":
                var IndKey = "ind35";
                break;
            case "_RAINBOW_":
                var IndKey = "ind36";
                break;
        }

        if (strGraphName == "_PRICE_") {
            var msg = "" + "  <div class=\"pop_ind\">" + "  	<div class=\"pop_ind_div1\">" + "		<div class=\"pop_title\">가격차트</div>" + "		<div class=\"tabDiv\">" + "			<ul class=\"tab_type2\">" + "				<li class=\"on\" onclick=\"IndTabP('1')\" id=\"IndTab1\">스타일</li>" + "				<li onclick=\"IndTabP('2')\" id=\"IndTab2\">설명</li>" + "			</ul>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT1\" style=\"display:\">" + "        	<div class=\"main_list\">" + "				<div class=\"lTitle\">차트타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"DType\" class=\"selectBox\">" + "						<option value=\"0\">캔들차트</option>" + "						<option value=\"1\">선차트</option>" + "					</select>" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT2\" style=\"display:none\">" + "			<div class=\"textarea_div\">" + "				<iframe src=\"/images/chart/exp/" + strGraphName + ".html\" width=\"340\" height=\"360\" frameborder=0></iframe>" + "			</div>" + "		</div>" + "  </div>" + "	<div style=\"padding-top:20px;\">" + "		<div style=\"width:400px;height:50px;text-align:center;\">" + "			<img src=\"/images/chart/bt_ok.png\" onclick=\"indSetup('" + strGraphName + "','" + strGraphKey + "')\" style=\"cursor:pointer;\">&nbsp;&nbsp;&nbsp;" + "			<img src=\"/images/chart/bt_close.png\" onclick=\"IndicatorSetupClose('" + IndKey + "')\"  style=\"cursor:pointer;\">" + "		</div>" + "	</div>";

        } else if (strGraphName == "_VOLUME_") {

        } else {

            var msg = "" + "  <div class=\"pop_ind\">" + "  	<div class=\"pop_ind_div1\">" + "		<div class=\"pop_title\">" + IndicatorPropertyInfo.m_strTitle + "</div>" + "		<div class=\"tabDiv\">" + "			<ul class=\"tab_type\">" + "				<li class=\"on\" onclick=\"IndTab('1')\" id=\"IndTab1\">변수</li>" + "				<li onclick=\"IndTab('2')\" id=\"IndTab2\">스타일</li>" + "				<li onclick=\"IndTab('3')\" id=\"IndTab3\">기준선</li>" + "				<li onclick=\"IndTab('4')\" id=\"IndTab4\">설명</li>" + "			</ul>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT1\">" + "			<div class=\"main_top\">" + "				<div class=\"tLTitle\">변수명</div>" + "				<div class=\"tRTitle\">변수값</div>" + "			</div>";

            var IndVariableStrNameH,
                BaseNumData,
                OverheatingData,
                StagnancyData,
                DTypeData,
                MATypeData;

            if (strGraphName == "_MA_" || strGraphName == "_VMA_") {
                if (IndicatorPropertyInfo.length > 0) {
                    msg += "		<div class=\"main_listMA\">";
                    for (var d = 0; d < IndicatorPropertyInfo.length; d++) {

                        msg += "" + "				<div class=\"main_list\">"
                            // + "					<div class=\"lTitleScoll\">MA "+IndicatorPropertyInfo.m_nMAArray[d]+"</div>"
                            + "					<div class=\"lTitleScoll\">MA</div>" + "					<div class=\"lInpScoll\">" + "						<input type=\"text\" id=\"MA" + d + "\" class=\"textBox\" value=\"" + IndicatorPropertyInfo[d].m_nMA + "\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "				</div>";

                    }
                    msg += "		</div>";
                }
            } else {

                for (var a = 0; a < IndicatorPropertyInfo.m_VariableArray.length; a++) {

                    if (ChartDIV == "mChartDIV")
                        continue;

                    var IndVariableStrName = IndicatorPropertyInfo.m_VariableArray[a].m_strName;

                    if (IndVariableStrName == "BaseNum") {
                        BaseNumData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;

                        //console.log("______"+BaseNumData+"___"+IndicatorPropertyInfo.m_VariableArray[a].m_strData);

                    } else if (IndVariableStrName == "Overheating") {
                        OverheatingData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "Stagnancy") {
                        StagnancyData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "DType") {
                        DTypeData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName == "MAType") {
                        MATypeData = IndicatorPropertyInfo.m_VariableArray[a].m_strData;
                    } else if (IndVariableStrName.substring(0, 4) == "View") {

                    } else {

                        console.log(IndVariableStrName);

                        switch (IndVariableStrName) {
                            case "Period":
                                IndVariableStrNameH = "기간";
                                break;
                            case "MAPeriod":
                                IndVariableStrNameH = "이평기간";
                                break;
                            case "ShortMAPeriod":
                                IndVariableStrNameH = "단기이평";
                                break;
                            case "LongMAPeriod":
                                IndVariableStrNameH = "장기이평";
                                break;
                            case "SignalPeriod":
                                IndVariableStrNameH = "Signal";
                                break;
                            case "UpLimitRate":
                                IndVariableStrNameH = "상한율";
                                break;
                            case "DownLimitRate":
                                IndVariableStrNameH = "하한율";
                                break;
                            case "SDMNum":
                                IndVariableStrNameH = "표준편차승수";
                                break;
                            case "FKPeriod":
                                IndVariableStrNameH = "Fase%K기간";
                                break;
                            case "FDPeriod":
                                IndVariableStrNameH = "Fase%D기간";
                                break;
                            case "SKPeriod":
                                IndVariableStrNameH = "Slow%K 기간";
                                break;
                            case "SDPeriod":
                                IndVariableStrNameH = "Slow%D 기간";
                                break;
                            case "WRPeriod":
                                IndVariableStrNameH = "William's %R";
                                break;
                            case "WDPeriod":
                                IndVariableStrNameH = "William's %D";
                                break;
                            case "Sec1period":
                                IndVariableStrNameH = "구간수1";
                                break;
                            case "Sec2period":
                                IndVariableStrNameH = "구간수2";
                                break;
                            case "Sec3period":
                                IndVariableStrNameH = "구간수3";
                                break;
                            case "Sec4period":
                                IndVariableStrNameH = "구간수4";
                                break; defaule:
                                IndVariableStrNameH = IndVariableStrName;
                                break;
                            // BaseNum   		기준선
                            // Overheating		과열
                            // Stagnancy		침체

                        }

                        msg += "" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">" + IndVariableStrNameH + "</div>" + "				<div class=\"lInp\"><input type=\"text\" id=\"" + IndVariableStrName + "\" class=\"textBox\" value=\"" + IndicatorPropertyInfo.m_VariableArray[a].m_strData + "\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "			</div>";
                    }
                }
            }

            msg += "" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">데이터타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"DType\" class=\"selectBox\">" + "						<option value=\"0\">시가</option>" + "						<option value=\"1\">고가</option>" + "						<option value=\"2\">저가</option>" + "						<option value=\"3\"  selected>종가</option>" + "						<option value=\"4\">(고+저)/2</option>" + "						<option value=\"5\">(고+저+종)/3</option>" + "					</select>" + "				</div>" + "			</div>" + "			<div class=\"main_list\">" + "				<div class=\"lTitle\">MA타입</div>" + "				<div class=\"lInp\">" + "					<select type=\"text\" id=\"MAType\"  class=\"selectBox\">" + "						<option value=\"0\" selected>단순</option>" + "						<option value=\"1\">지수</option>" + "						<option value=\"2\">가중</option>" + "						<option value=\"3\">기하</option>" + "						<option value=\"4\">조화</option>" + "						<option value=\"5\">심각</option>" + "						<option value=\"6\">적합</option>" + "					</select>	" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT2\" style=\"display:none\">" + "			<div class=\"main_top\">" + "				<div class=\"TitleA\">선택</div>" + "				<div class=\"TitleL\">목록</div>" + "				<div class=\"TitleC\">색상</div>" + "				<div class=\"TitleT\">타입</div>" + "				<div class=\"TitleB\">두께</div>" + "				<div class=\"TitleS\">형태</div>" + "			</div>";

            for (var b = 0; b < IndicatorPropertyInfo.m_SubGraphArray.length; b++) {
                var IndSubGraphInfo_bShow = IndicatorPropertyInfo.m_SubGraphArray[b].m_bShow;
                if (IndSubGraphInfo_bShow == true)
                    var chBox = "checked";
                else
                    var chBox = "";

                var IndSubGraphInfo_clr = IndicatorPropertyInfo.m_SubGraphArray[b].m_clrSubGraph;

                if (strGraphName == "_MA_" || strGraphName == "_VMA_") {
                    var IndSubGraphInfo_Title = IndicatorPropertyInfo.m_MAPropertyInfoArray[b].m_nMA;
                } else {
                    var IndSubGraphInfo_Title = IndicatorPropertyInfo.m_SubGraphArray[b].m_strSubGraphTitle;
                }

                sLineType = "S";

                if (IndicatorPropertyInfo.m_SubGraphArray[b].m_strSubGraphName == "BaseLine") {
                    var IndSubGraphInfo_clr_tab3 = IndSubGraphInfo_clr;
                    var IndSubGraphInfo_clr_num = b + 1;
                    //"clr"+(b+1);
                    sLineType = "B";
                    console.log("--->" + IndSubGraphInfo_clr_num);
                }

                //	if(IndicatorPropertyInfo.m_SubGraphPropertyInfoArray[b].m_strSubGraphName=="BaseLine")continue;
                //<div style=\"background:"+IndSubGraphInfo_clr+"\">&nbsp;</div>
                //					<select type=\"text\" id=\"clr"+(b+1)+"\"  class=\"selectBoxT\" style=\"background:"+IndSubGraphInfo_clr+";\">"
                //						<option value=\""+IndSubGraphInfo_clr+"\" style=\"background:"+IndSubGraphInfo_clr+";\" selected>"+IndSubGraphInfo_clr+"</option>"
                //						<option value=\"#000000\" style=\"background:#000000;\">#000000</option>"
                //					</select>"
                /****************크롬에서만 사용가능**************************************************
                    +"				<div class=\"lInpC\" id=\"colorBox\" >"
                    +"					<input type=\"color\" id=\"clr"+(b+1)+"\" value=\""+IndSubGraphInfo_clr+"\" class=\"inputBoxC\">"
                    +"				</div>"
                    **************************************************************************************/
                var COLOR_ARRAY = new Array("#FFC0CB", "#FF0000", "#FFA500", "#FFFF00", "#008000", "#0000FF"/*, "#000040"*/, "#800080", "#000000");
                colorHTML = "";
                colorHTML += "<div style=\"float:left;border:1px;width:180px;\"><span style=\"float:left;width:20px;height:37px;background:" + IndSubGraphInfo_clr + "\" onclick=\"selectColor('" + (b + 1) + "','" + IndSubGraphInfo_clr + "','" + sLineType + "')\">&nbsp;</span>";

                for (var c = 0; c < COLOR_ARRAY.length; c++) {
                    colorHTML += "<span style=\"float:left;width:20px;height:37px;background:" + COLOR_ARRAY[c] + "\" onclick=\"selectColor('" + (b + 1) + "','" + COLOR_ARRAY[c] + "\','" + sLineType + "')\">&nbsp;</span>";
                }

                colorHTML += "</div>";
                msg += "" + "			<div id=\"colorDiv" + (b + 1) + "\" class=\"colorDiv\" style=\"display:none;position:absolute;left:202px;top:" + (142 + b * 37) + "px;z-index:99;\">" + colorHTML + "</div>" + "			<div class=\"main_list\">" + "				<div class=\"lInpA\"><input type=\"checkbox\" id=\"m_bShow" + (b + 1) + "\" value=\"y\" class=\"textBoxA\" " + chBox + "></div>" + "				<div class=\"lInpL\"><input type=\"text\" id=\"IndSubGraphInfo" + (b + 1) + "\" value=\"" + IndSubGraphInfo_Title + "\" class=\"textBoxL\" disabled></div>" + "				<div class=\"lInpC\" id=\"colorBox\" >" + "					<div id=\"clrBox" + (b + 1) + "\"style=\"border:1px;background:" + IndSubGraphInfo_clr + ";\" onclick=\"showColor(" + (b + 1) + ")\">&nbsp;</div>" + "						<input type=\"hidden\" id=\"clr" + (b + 1) + "\" value=\"" + IndSubGraphInfo_clr + "\" >" + "				</div>"
                    // + "				<div class=\"lInpC\" id=\"colorBox\" >"
                    //+"					<input type=\"color\" id=\"clr"+(b+1)+"\" value=\""+IndSubGraphInfo_clr+"\" class=\"inputBoxC\">"
                    //+"				</div>"
                    + "				<div class=\"lInpT\">" + "					<select type=\"text\" id=\"ChartType" + (b + 1) + "\"  class=\"selectBoxT\">" + "						<option value=\"0\">선</option>" + "						<option value=\"1\">막대</option>" + "					</select>" + "				</div>" + "				<div class=\"lInpB\">" + "					<select type=\"text\" id=\"LinePt" + (b + 1) + "\"  class=\"selectBoxB\">" + "						<option value=\"1\">1pt</option>" + "						<option value=\"2\">2pt</option>" + "						<option value=\"3\">3pt</option>" + "						<option value=\"4\">4pt</option>" + "						<option value=\"5\">5pt</option>" + "					</select>" + "				</div>" + "				<div class=\"lInpS\">" + "					<select type=\"text\" id=\"lineType" + (b + 1) + "\"  class=\"selectBoxS\">" + "						<option value=\"0\">-</option>" + "						<option value=\"1\">---</option>" + "						<option value=\"2\">-&nbsp;-&nbsp;-</option>" + "						<option value=\"3\">-&nbsp;&nbsp;-&nbsp;&nbsp;-</option>" + "						<option value=\"4\">-&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;1-</option>" + "					</select>	" + "				</div>" + "			</div>";
            }

            if (OverheatingData != undefined) {
                msg += "" + "			<div class=\"bojo\">" + "				<div class=\"bojoTitle\">부가기능 </div>" + "				<div class=\"bojoDiv\">" + "					<div class=\"bojoList\">" + "						<div class=\"bojoLV1\">과열</div>" + "						<div class=\"bojoLV2\"><!-- div style=\"background:#FF0000;width:70%;height:20px;margin-top:10px\">&nbsp;</div -->&nbsp;</div>" + "						<div class=\"bojoLV3\">기준값</div>" + "						<div class=\"bojoLV4\"><input type=\"text\" id=\"Overheating\" value=\"" + OverheatingData + "\" class=\"textBoxB\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "					</div>" + "					<div class=\"bojoList\">" + "						<div class=\"bojoLV1\">침체</div>" + "						<div class=\"bojoLV2\"><!-- div style=\"background:#0000FF;width:70%;height:20px;margin-top:10px;\">&nbsp;</div -->&nbsp;</div>" + "						<div class=\"bojoLV3\">기준값</div>" + "						<div class=\"bojoLV4\"><input type=\"text\" id=\"Stagnancy\" value=\"" + StagnancyData + "\" class=\"textBoxB\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\"></div>" + "					</div>" + "				</div>" + "			</div>";
            }

            if (BaseNumData == undefined)
                BaseNumData = "";

            console.log("______" + BaseNumData + "___");

            BcolorHTML = "";
            BcolorHTML += "<div style=\"float:left;border:1px;width:180px;\"><span style=\"float:left;width:20px;height:37px;background:" + IndSubGraphInfo_clr_tab3 + "\" onclick=\"selectColor('" + IndSubGraphInfo_clr_num + "','" + IndSubGraphInfo_clr_tab3 + "','B')\">&nbsp;</span>";
            for (var c = 0; c < COLOR_ARRAY.length; c++) {
                BcolorHTML += "<span style=\"float:left;width:20px;height:37px;background:" + COLOR_ARRAY[c] + "\" onclick=\"selectColor('" + IndSubGraphInfo_clr_num + "','" + COLOR_ARRAY[c] + "\','B')\">&nbsp;</span>";
            }

            BcolorHTML += "</div>";
            msg += "" + "		</div>" + "		<div id=\"colorDivB\" class=\"colorDiv\" style=\"display:none;position:absolute;left:202px;top:" + 200 + "px;z-index:99;\">" + BcolorHTML + "</div>" + "		<div class=\"mainDiv\" id=\"mainT3\" style=\"display:none\">" + "			<div style=\"width:100%;padding-top:10px\">" + "				<div style=\"float:left;width:50%;border:0px solid #2B3D57;background:#fff;\">" + "					<div style=\"float:left;width:100%;height:340px;padding-top:10px;\">" + "						<div style=\"float:left;width:50%;\">" + "							<div style=\"float:left;width:100%;padding-bottom:10px;height:20px;\">" + "								<input type=\"text\" id=\"baselineKey\" value=\"\" class=\"textBox3\" onkeyup=\"OnyNumChar(event,'','')\" onkeydown=\"OnyNumChar(event,'','')\">" + "							</div>" + "							<div style=\"float:left;width:80%;padding-bottom:10px;height:250px;border:0px solid #2B3D57;\">" + "								<select name=\"BaseNum\" id=\"BaseNum\" style=\"width:100%;height:250px;background:#fff;border:1px solid #4e5768;color:#000;float:left;vertical-align:top;\" size=2>" + "										<option value=\"" + BaseNumData + "\" selected>" + BaseNumData + "</option>" + "								</select>" + "							</div>" + "						</div>" + "						<div style=\"float:left;width:45%;\">" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"baseAdd();\"><img src=\"/images/chart/bt_p.png\"></div>" + "							</div>" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"basedel('O');\"><img src=\"/images/chart/bt_del.png\"></div>" + "							</div>" + "							<div style=\"padding-bottom:10px;height:20px;\">" + "								<div onclick=\"basedel('A');\"><img src=\"/images/chart/bt_del_all.png\"></div>" + "							</div>" + "						</div>" + "					</div>" + "				</div>" + "				<div style=\"float:left;width:46%;border:2px solid #D0D6DE;background:#fff;margin-left:10px\">" + "					<div style=\"float:left;width:100%;\">" + "						<div style=\"float:left;width:100%;height:40px;line-height:40px;border-bottom:2px solid #D0D6DE;font-weight:bold;\">기준선 스타일</div>" + "						<div style=\"float:left;width:100%;height:50px;border-bottom:1px solid #D0D6DE;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">색상</div> " + "							<div id=\"colorBox\" style=\"float:left;width:68%;padding-right:2px;padding-top:10px;\">" + "								<div id=\"clrBoxB\"style=\"width:80%;height:30px;background:" + IndSubGraphInfo_clr_tab3 + ";\" onclick=\"showColor('B')\">&nbsp;</div>" + "								<input type=\"hidden\" id=\"clr_tab3\" value=\"" + IndSubGraphInfo_clr_tab3 + "\" >" + "							</div>"
                // + "							<div style=\"float:left;width:68%;padding-right:2px;padding-top:10px;\" id=\"colorBox3\" >"
                //+"								<input type=\"color\" id=\"clr_tab3\" value=\""+IndSubGraphInfo_clr_tab3+"\" class=\"inputBoxC\" onchange=\"clrChange('"+IndSubGraphInfo_clr_num+"')\">"
                //+"							</div>"
                + "						</div>" + "						<div style=\"float:left;width:100%;height:50px;border-bottom:1px solid #D0D6DE;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">두께</div>" + "							<div style=\"float:left;width:68%;line-height:50px;padding-right:2px;\">" + "								<select type=\"text\" id=\"BLinePt\"  class=\"selectBoxB3\">" + "									<option value=\"1\">1pt</option>" + "									<option value=\"2\">2pt</option>" + "									<option value=\"3\">3pt</option>" + "									<option value=\"4\">4pt</option>" + "									<option value=\"5\">5pt</option>" + "								</select>" + "							</div>" + "						</div>" + "						<div style=\"float:left;width:100%;height:50px;\">" + "							<div style=\"float:left;width:30%;line-height:50px\">형태</div>" + "							<div style=\"float:left;width:68%;line-height:50px;padding-right:2px;\">" + "								<select type=\"text\" id=\"BlineType\"  class=\"selectBoxS3\">" + "									<option value=\"0\">-</option>" + "									<option value=\"1\">--</option>" + "								</select>" + "							</div>" + "						</div>" + "					</div>" + "				</div>" + "			</div>" + "		</div>" + "		<div class=\"mainDiv\" id=\"mainT4\" style=\"display:none\">" + "			<div class=\"textarea_div\">" + "				<iframe src=\"/images/chart/exp/" + strGraphName + ".html\" width=\"340\" height=\"360\" frameborder=0></iframe>" + "			</div>" + "		</div>" + "  </div>" + "	<div style=\"padding-top:20px;\">" + "		<div style=\"width:400px;height:50px;text-align:center;\">" + "			<img src=\"/images/chart/bt_ok.png\" onclick=\"indSetup('" + strGraphName + "','" + strGraphKey + "')\" style=\"cursor:pointer;\">&nbsp;&nbsp;&nbsp;" + "			<img src=\"/images/chart/bt_close.png\" onclick=\"IndicatorSetupClose('" + IndKey + "')\"  style=\"cursor:pointer;\">" + "		</div>" + "	</div>";
            /*
                +"		<div style=\"width:400px;height:40px;text-align:center;\">"
                +"			<div onclick=\"indSetup('"+strGraphName+"','"+strGraphKey+"')\"> <img src=\"/Assets/Images/chart/bt_ok.png\"></div>"
                +"			<div onclick=\"IndicatorSetupClose('"+IndKey+"')\" > <img src=\"/Assets/Images/chart/bt_close.png\"></div>"
                */
        }

        if (ChartDIV != "mChartDIV") {

            $('#IndicatorSetupDiv').empty();
            $('#IndicatorSetupDiv').append(msg);
            document.getElementById('IndicatorSetupDiv').style.display = "inline-block";
        }
    }

}

function IndicatorSetupClose(key) {
    $('#IndicatorSetupDiv').empty();
    $('#IndicatorSetupDiv').append('');
    document.getElementById('IndicatorSetupDiv').style.display = "none";
}

//수정 LJH 2018.12.7
function IndicatorAdd(key) {
    if (document.getElementById('indAddDiv').style.display == 'inline-block') {
        document.getElementById('indAddDiv').style.display = "none";
    } else {
        document.getElementById('indAddDiv').style.display = "inline-block";
    }
}

/*
function IndicatorAdd(key) {
    if (key == "O") {
         document.getElementById('indAddDiv').style.display = "inline-block";
        //document.getElementById('IndiArr').innerHTML ="<div style=\"float:right;width:150px;height:28px;line-height:30px;background:#0C5196;border:1px solid #0C5196;text-align:center;color:#fff;cursor:pointer;font-family:'Dotum';font-size:14px;font-weight:bold;\" onclick=\"IndicatorAdd('P');\" >지표 설정&nbsp;&nbsp;<img src=\"/images/chart/arr_up.png\" style=\"vertical-align:middle;;height:6px\" >";
    } else {
        document.getElementById('indAddDiv').style.display = "none";
        //document.getElementById('IndiArr').innerHTML ="<div style=\"float:right;width:150px;height:28px;line-height:30px;background:#0C5196;border:1px solid #0C5196;text-align:center;color:#fff;cursor:pointer;font-family:'Dotum';font-size:14px;font-weight:bold;\" onclick=\"IndicatorAdd('O');\" >지표 설정&nbsp;&nbsp;<img src=\"/images/chart/arr_dn.png\" style=\"vertical-align:middle;;height:6px\" >";
    }
}
*/

function clrChange(key) {
    console.log(key);

    document.getElementById(key).value = document.getElementById('clr_tab3').value;
}

function IndTab(tabKey) {
    for (var t = 1; t <= 4; t++) {
        if (t == eval(tabKey)) {
            $("#IndTab" + t).addClass("on");
            document.getElementById('mainT' + t).style.display = "";
        } else {
            $("#IndTab" + t).removeClass("on");
            document.getElementById('mainT' + t).style.display = "none";
        }
    }
}

function IndTabP(tabKey) {
    for (var t = 1; t <= 2; t++) {
        if (t == eval(tabKey)) {
            $("#IndTab" + t).addClass("on");
            console.log(tabKey);
            document.getElementById('mainT' + t).style.display = "";
        } else {
            $("#IndTab" + t).removeClass("on");
            document.getElementById('mainT' + t).style.display = "none";
        }
    }
}

function baseAdd() {

    var baseLineData = document.getElementById('baselineKey').value;

    console.log(baseLineData);
    $('#BaseNum').append("<option value=\"" + baseLineData + "\"> " + baseLineData + "</option>");

    document.getElementById('baselineKey').value = "";

}

function basedel(key) {

    var optionLength = document.getElementById('BaseNum').options.length;

    for (var i = optionLength - 1; i >= 0; i--) {
        if (key == "O") {
            if (document.getElementById('BaseNum').options[i].selected) {
                document.getElementById('BaseNum').options[i] = null;
                //해당 option 을 null 시킨다(지운다)
            }
        } else {
            document.getElementById('BaseNum').options[i] = null;
        }
    }
}

function OnyNumChar(event, key, num) {

    if (key == 'MA') {
        var code = (event.which) ? event.which : event.keyCode;
        console.log(code);
        if (!(code == 8 || code == 9 || code == 13 || code == 46 || code == 144 || (code > 48 && code <= 57) || code == 110 || code == 190 || code >= 96 && code <= 105)) {
            event.target.value = event.target.value.replace(/[^0-9]/g, "");
            return false;
        } else {
            document.getElementById('IndSubGraphInfo' + (num + 1)).value = document.getElementById('MA' + num).value;
            return;
        }

    } else {
        var code = (event.which) ? event.which : event.keyCode;
        console.log(code);
        if (!(code == 8 || code == 9 || code == 13 || code == 46 || code == 144 || (code > 48 && code <= 57) || code == 110 || code == 190 || code >= 96 && code <= 105)) {
            event.target.value = event.target.value.replace(/[^0-9]/g, "");
            return false;
        } else {
            //event.target.value = event.target.value.replace(/[^0-9]/g,"");
            return;
        }
    }
}

function rWidget(key) {
    if (key == "O") {
        console.log("열기:" + key);
        document.getElementById('cRightWidgetClose').style.display = "none";
        document.getElementById('cRightWidgetOpen').style.display = "";
        document.getElementById('canvasDP2').style.width = "1035px";
    } else {
        console.log("닫기:" + key);
        document.getElementById('cRightWidgetClose').style.display = "";
        document.getElementById('cRightWidgetOpen').style.display = "none";
        document.getElementById('canvasDP2').style.width = "1020px";
    }
}

function showColor(key) {
    if (document.getElementById("colorDiv" + key).style.display == "none") {
        console.log("block____" + key);
        document.getElementById("colorDiv" + key).style.display = "block";
    } else {
        console.log("none____" + key);
        document.getElementById("colorDiv" + key).style.display = "none";
    }
}

function selectColor(key, color, gubun) {

    if (gubun == "S") {
        console.log("selectColorS____" + key + "__________" + color + "__________" + gubun);
        document.getElementById("clr" + key).value = color;
        document.getElementById("clrBox" + key).style.background = color;
        document.getElementById("colorDiv" + key).style.display = "none";
    } else if (gubun == "B") {
        console.log("selectColorB____" + key + "__________" + color + "__________" + gubun);
        document.getElementById("clr" + key).value = color;
        document.getElementById("clrBox" + key).style.background = color;
        document.getElementById("colorDiv" + gubun).style.display = "none";
        document.getElementById("clr_tab3").value = color;
        document.getElementById("clrBox" + gubun).style.background = color;
    }
}

function highlight(obj, num, isover) {
    if (obj == "Logo") {
        if (isover == "over") {
            //document.getElementById('logoDiv').style.zIndex="-99999";
        } else {
            //document.getElementById('logoDiv').style.display="9999";
        }
    } else if (obj == "Reset") {
        if (isover == "over") {
            document.getElementById(num).src = "/images/chart/bt_" + num + "_over.png";
        } else {
            document.getElementById(num).src = "/images/chart/bt_" + num + ".png";
        }
    } else if (obj == "Tool") {
        if (isover == "over") {
            document.getElementById("Tool" + num).src = "/images/chart/btc_" + num + "_over.png";
        } else {
            document.getElementById("Tool" + num).src = "/images/chart/btc_" + num + ".png";
        }
    } else if (obj == "mTab") {
        var pIJWB = IJWBconv(document.getElementById('ijwb').value);
        var icon = IJWBconNum(num);

        if (isover == "over") {
            document.getElementById("m_" + num).src = "/images/chart/bt_" + icon + "_over.png";
        } else {
            document.getElementById("m_" + num).src = "/images/chart/bt_" + icon + ".png";
        }

        var sicon = IJWBconNum(pIJWB);
        document.getElementById("m_" + pIJWB).src = "/images/chart/bt_" + sicon + "_over.png";

    } else {
        var pIJWB = IJWBconv(document.getElementById('ijwb').value);
        var icon = IJWBconNum(num);

        if (isover == "over") {
            document.getElementById(num).src = "/images/chart/bt_" + icon + "_over.png";
        } else {
            document.getElementById(num).src = "/images/chart/bt_" + icon + ".png";
        }

        var sicon = IJWBconNum(pIJWB);
        document.getElementById(pIJWB).src = "/images/chart/bt_" + sicon + "_over.png";

    }
}

function IJWBChang(key) {
    var pIJWB = IJWBconv(document.getElementById('ijwb').value);
    var pIJWBnum = IJWBconNum(pIJWB);
    document.getElementById(pIJWB).src = "/images/chart/bt_" + pIJWBnum + ".png";

    var tIJWB = IJWBconv(key);
    //var tIJWB = IJWBconNum(key)
    document.getElementById(tIJWB).src = "/images/chart/bt_0" + key + "_over.png";
    document.getElementById('ijwb').value = key;

    if (key >= 5) {
        document.getElementById('dataGroupDiv').style.display = "";
    } else {
        if (key <= 4) {
            document.getElementById('dataGroupDiv').style.display = "none";
        }
    }

    SymbolChange();

}

function mIJWBChang(key) {
    var pIJWB = IJWBconv(document.getElementById('ijwb').value);
    var pIJWBnum = IJWBconNum(pIJWB);
    document.getElementById("m_" + pIJWB).src = "/images/chart/bt_" + pIJWBnum + ".png";

    var tIJWB = IJWBconv(key);
    //var tIJWB = IJWBconNum(key)
    document.getElementById("m_" + tIJWB).src = "/images/chart/bt_0" + key + "_over.png";
    document.getElementById('ijwb').value = key;

    if (key >= 5) {
        document.getElementById('m_dataGroupDiv').style.display = "";
    } else {
        if (key <= 4) {
            document.getElementById('m_dataGroupDiv').style.display = "none";
        }
    }

    SymbolChange();

}

function IJWBGroupChang(key) {
    document.getElementById('ijwbG').value = key;
    SymbolChange();
}

function IJWBconv(key) {
    switch (key) {
        case "1":
            var num = "day";
            break;
        case "2":
            var num = "week";
            break;
        case "3":
            var num = "mon";
            break;
        case "4":
            var num = "year";
            break;
        case "5":
            var num = "min";
            break;
        case "6":
            var num = "sec";
            break;
    }

    return num;
}

function IJWBconNum(key) {
    switch (key) {
        case "day":
            var icon = "01";
            break;
        case "week":
            var icon = "02";
            break;
        case "mon":
            var icon = "03";
            break;
        case "year":
            var icon = "04";
            break;
        case "min":
            var icon = "05";
            break;
        case "sec":
            var icon = "06";
            break;
    }

    return icon;
}

function topPrc(p, h, l, ch, cg, vo, va) {
    if (ch > 0) {
        TopPrc.innerHTML = p.format();
        document.getElementById('TopPrc').style.color = "#FF0000";
        document.getElementById('TopCh').style.color = "#FF0000";
        document.getElementById('TopCg').style.color = "#FF0000";
        //TopCh.innerHTML="▲ "+ch.format();
        //TopCg.innerHTML=FRP(cg,4)+"%";
        TopCh.innerHTML = "▲ " + ch.format();
        TopCg.innerHTML = cg + "%";
    } else if (ch == 0) {
        TopPrc.innerHTML = p.format();
        document.getElementById('TopPrc').style.color = "#000000";
        document.getElementById('TopCh').style.color = "#000000";
        document.getElementById('TopCg').style.color = "#000000";
        //TopCh.innerHTML="▲ "+ch.format();
        //TopCg.innerHTML=FRP(cg,4)+"%";
        TopCh.innerHTML = " " + ch.format();
        TopCg.innerHTML = cg + "%";
    } else {
        TopPrc.innerHTML = p.format();
        document.getElementById('TopPrc').style.color = "#0070FF";
        document.getElementById('TopCh').style.color = "#0070FF";
        document.getElementById('TopCg').style.color = "#0070FF";

        if (parseFloat(ch) < 0) {
            TopCh.innerHTML = "▼ " + (ch * -1).format();
            //.replace("-","");
        } else {
            TopCh.innerHTML = "▼ " + (ch * -1).format();
        }
        //var cgRep = FRP(cg,4)+" %";
        var cgRep = cg + " %";

        TopCg.innerHTML = cgRep.replace("-", "");
    }

    //TopH.innerHTML=h.format();
    //TopL.innerHTML=l.format();
    TopVo.innerHTML = vo.format();
    //TopVa.innerHTML=va.format();

}

/***wheel*********************************************************/

function wheel(event) {
    var delta = 0;
    if (!event) {//Mozilla (Firefox) 계열
        event = window.event;
    }

    if (event.wheelDelta) {//Internet Explorer 계열
        delta = event.wheelDelta / 120;
        if (window.opera) {//Opera 계열
            delta = -delta;
        }
    } else if (event.detail) {//Mozilla (Firefox) 계열
        delta = -event.detail / 3;
    }
    if (delta) {
        //delta < 0 up
        //delta > 0 down
        console.log(delta);
    }
}

/***wheel*********************************************************/

function ZoomOut(zoType) {
    console.log(zoType);
    Chart.InitialViewInfo(300);
}


function addData(strRQ, symbol, ijwb, sDay) {
    

    if (!gbRequest) {

        gbRequest = true;

        $.getJSON("http://211.240.103.90/kovex/chartdata.inc?symbol=" + symbol + "&num=5&ijwb=" + ijwb + "&sDay=" + sDay, function (addDataArr) {

            ////console.log(dataArr.ref.D1에러여부);
            //////////////////////////////////////////////////////////////////
            var addDataLength = addDataArr.data.length;
            var addOpenprc,
                addHighprc,
                addLowprc,
                addCloseprc,
                addCumdealqty,
                addDate;
            var addData;
            var addChartData = "";

            var highest = null;
            var lowest = null;

            for (var i = 0; i < addDataLength; i++) {

                if (ijwb != 5 && ijwb != 6)
                    addDate = addDataArr.data[i].date;
                else
                    addDate = addDataArr.data[i].date + addDataArr.data[i].time;

                addOpenprc = sprintf(10, addDataArr.data[i].openprc);
                addHighprc = sprintf(10, addDataArr.data[i].highprc);
                addLowprc = sprintf(10, addDataArr.data[i].lowprc);
                addCloseprc = sprintf(10, addDataArr.data[i].closeprc);
                addCumdealqty = sprintf(19, addDataArr.data[i].cumdealqty);

                addData = (addDate + "" + addOpenprc + "" + addHighprc + "" + addLowprc + "" + addCloseprc + "" + addCumdealqty);
                addChartData += addData;

                if (highest == null || highest < addHighprc)
                    highest = addHighprc;
                if (lowest == null || lowest > addLowprc)
                    lowest = addLowprc;
            }

            console.log("highest:" + highest + ", lowest:" + lowest);

            addChartData = addDataLength + "!" + addChartData;

            var bAppend = true;
            var bAscendingOrder = false;
            var bMergeXScale = true;
            Chart.SetPacketData(strRQ, addChartData, addChartData.length, bAppend, bAscendingOrder, bMergeXScale);

            Chart.Draw(DRAW_CASE_TR | DRAW_CASE_SCROLL);

            gbRequest = false;
        });
    }
}
</script>